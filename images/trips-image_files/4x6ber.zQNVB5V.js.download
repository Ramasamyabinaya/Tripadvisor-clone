(this.$WP=this.$WP||[]).push(["4x6ber",(e,t)=>{var r,n,a,s,o,i,u,c,d,g,l,p,h,m,v,I,f,w,y,C,M,A,b=()=>{var[e,t]=u("");return c(()=>{t(window.location.origin)},[]),e},$={enabled:!0,gaMeasurementId:"G-J2L8MY40SZ",scriptSrcPath:"/static/ga/ga.html",monitoringEnabled:!0,isDebug:!0},D={},G=(e,t,r)=>`${t}${e.scriptSrcPath}?gaMeasurementId=${e.gaMeasurementId}${r?`&userId=${r}`:""}&parentDomain=${encodeURIComponent(t)}${e.isDebug?"&debug=true":""}`,S=e=>e.startsWith("hare")||e.match("\\.qa.tripadvisor-preview")?y:C,E=(e,t)=>e.enabled&&!D[t],P={current:[]},L=e=>{Array.isArray(P.current)&&(P.current.forEach(t=>{e(t)}),P.current={push(t){e(t)}})},N=e=>{P.current.push(e)},R=()=>{P.current=[]},_={current:null},q=e=>{_.current=e},T=e=>{var t;if(!_.current)return e;if("string"!=typeof e.customData)t={};else try{t=JSON.parse(e.customData)}catch(t){return console.error("failed to parse event customData, will not enrich."),e}return t.google_analytics=_.current,{...e,customData:JSON.stringify(t)}},W=e=>_.current?{...e,googleAnalyticsIds:_.current}:e,J=(e,t)=>{var r=new MessageChannel;return r.port1.onmessage=e=>{"GAIdResp"===e.data.message&&q(e.data.response)},e.postMessage("initGAMessagePort",t,[r.port2]),r.port1.postMessage("GAIdReq"),e=>{r.port1.postMessage(e)}},U=({gaConfig:e,origin:t})=>{var[n,a]=u(!1),s=v(),o=d(null),i=G(e,t,s);return c(()=>n&&t&&o.current&&o.current.contentWindow?(L(J(o.current.contentWindow,t)),()=>{R()}):()=>{},[n,t]),r(m,{src:i,title:"ga",ref:o,style:{display:"none",width:"100%",height:"100%"},sandbox:"allow-scripts allow-same-origin",onLoad:g(()=>{a(!0)},[])})},x=()=>{var e=o(),t=n(),r=f(),a=I(),s=i(),{page:u,params:c,path:d}=e,l="detailId"in c?c.detailId:void 0,p="geoId"in c?c.geoId:void 0,h=l||p||void 0;return g(()=>({page_title:u,page_location:`https://${t}${d}`,pageview_id:s,location_id:h,geo_id:p,device_platform:a,locale:r,page_referrer:document.referrer}),[a,p,r,h,t,u,d,s])},O=(e,t)=>({event:e.event,data:{...t,...e.data}}),Y=()=>{var e=i(),t=x(),r=d(t);c(()=>{r.current=t},[t]),c(()=>{N(O({event:"page_view",data:{pageview_id:e}},r.current()))},[e])},Z=()=>{var e=S(n()),t=w(),{page:i}=o(),u=l(),c=u.isPending||"string"!=typeof u.country||A.has(u.country),d=p(h.TARGETING),g=p(h.ANALYTICS),m=p(h.FUNCTIONAL);return(M(),!c&&d&&g&&m&&t&&E(e,i))?r(a,{component:s.ga,children:r(U,{gaConfig:e,origin:t})}):null};return[()=>{w=b,y={...$,gaMeasurementId:"G-J2L8MY40SZ"},C={...$,gaMeasurementId:"G-QX0Q50ZC9P",isDebug:!1},M=Y,A=new Set(["AT","DK","FR","IT"]),e({GoogleAnalyticsLoader:Z,enrichEvent:T,enrichV2Event:W})},[e=>r=e.jsx,e=>n=e.useDomainName,e=>(a=e.default,s=e.Component),e=>(o=e.useRoute,i=e.usePageviewUid),e=>(u=e.useState,c=e.useEffect,d=e.useRef,g=e.useCallback),e=>(l=e.useConsentModel,p=e.useConsent,h=e.CategoriesEnum),e=>m=e.EmbeddedContent,e=>v=e.useUserId,e=>I=e.useViewportCategory,e=>f=e.useLocale]]},["21h32l","qlcuu5","6nmgrj","fgwvq1","o4yt4q","973cci","dyfdn5","52far5","ys6v1o","7thqz4"]]);
