(this.$WP=this.$WP||[]).push(["2wscmt",(e,r)=>{var a,t,i,d,n,o,s,l,c,p,_,u,T,m,h,v,b,C,w,y,f={nodeContainer:"_c",underline:"TuRMH"},g=({trip:e,messageType:r,openTripInNewTab:i=!1,onCtaClick:s,onVisible:l})=>{var c,p=h(l),_=t(()=>{s?.();var a="SAVED"===r?v({tripId:e.id,tab:"Saves"}):e.route?.url;a&&(i?window.open(a):window.location.href=a)},[s,e,i,r]),b=a(m,{className:f.underline,onClick:_,"data-automation":"ViewTripToast.viewTrip",children:a(d,{id:"stat_modal_view_trip_v2"})});switch(r){case"CREATED":c=a(n,{id:"create_trip_success_toast_with_bold",args:{TripName:u(e?.title||"")}});break;case"SAVED":c=a(n,{id:"stat_modal_saved_to_tripname_with_bold",args:{TripName:u(e?.title||"")}});break;default:c=null}return a("div",{ref:p,children:a(o,{cta:b,children:a(T,{element:"savedToast",trip:e,children:a("span",{className:f.nodeContainer,children:c})})})})},k={tripNameLink:"bCZgg"},I=({trip:e,onUndo:r})=>{var t=a(m,{onClick:r,children:a(d,{id:"stat_modal_undo"})});return a(o,{cta:t,children:a(T,{element:"unsaveToast",trip:e,children:a("span",{className:f.nodeContainer,children:a(n,{id:"stat_modal_removed_from_tripname_with_bold_v3",args:{TripName:u(e?.title),TripLink:e.route?.url||"",TripClass:k.tripNameLink}})})})})},N=({trip:e,hideCta:r,onVisible:i,onCtaClick:s})=>{var l=h(i),c=a(m,{"data-automation":"AutosavedToTripToast.change",onClick:t(()=>{s()},[s]),children:a(d,{id:"stat_modal_change"})});return a("div",{ref:l,children:a(o,{cta:r?null:c,children:a(T,{element:"savedToast",trip:e,children:a("span",{"data-automation":"AutosavedToTripToast.savedTo",className:f.nodeContainer,children:a(n,{id:"stat_modal_saved_to_tripname_with_bold_new_tab",args:{TripName:u(e?.title),TripLink:e.route?.url||"",TripClass:k.tripNameLink}})})})})})},A=({onUndo:e})=>{var r=a(m,{onClick:e,children:a(d,{id:"stat_modal_undo"})});return a(o,{cta:r,children:a(d,{id:"stat_modal_removed_from_tripname",args:{sTripName:a(d,{id:"m1_trips_my_saves_header"})}})})},q=8e3,E=({saveToast:e}={})=>{var[r,n]=i(s),[,u]=l(c),T=t((e,r)=>u({tripId:e,referenceId:`${r.id}`,referenceType:r.type,allowDuplicates:!1}).then(e=>{var r=e?.data?.addItemToTrip,a=e?.data?.addItemToTrip?.trip,t=e?.data?.addItemToTrip?.errors?.[0]?.error;return{trip:a,error:r?null:{query:"ADD_ITEM_TO_TRIP",tripsError:t||void 0}}}).catch(()=>({trip:null,error:{query:"ADD_ITEM_TO_TRIP"}})),[u]),m=t(({trip:t,messageType:i,onCtaClick:d,onVisible:n,openTripInNewTab:o})=>{var s=a(b,{openTripInNewTab:o??!1,trip:t,messageType:i,onCtaClick:d,onVisible:n});r({node:e??s})},[r,e]),h=t((e,t,i)=>{r({node:a(C,{trip:e,onUndo:()=>{T(e.id,t).then(e=>{i&&i(e.trip,e.error)})}})})},[T,r]),v=t((t,i,d,o,s=q)=>{var l=a(w,{trip:t,onCtaClick:()=>{i&&i(),n()},onVisible:d,hideCta:o});r({node:e??l,timeout:s})},[r,n,e]),f=t(()=>{r({node:a(o,{children:a(d,{id:"m1_trips_save_success_stat_d2"})})})},[r]),[,g]=l(p),k=t(e=>g({id:`${e.id}`,type:e.type}).then(e=>({isAdded:!!e?.data?.MySaves_addToMySavesSingle})).catch(()=>({isAdded:!1})),[g]),I=t((e,t)=>{r({node:a(y,{onUndo:()=>{k(e).then(e=>{t(e.isAdded)})}})})},[r,k]),N=t(e=>r({node:a(o,{children:e})}),[r]);return{launchViewTripToast:m,launchRemoveFromTripToast:h,launchAutoSavedToTripToast:v,launchAddItemToMySavesToast:f,launchRemoveItemFromMySavesToast:I,launchErrorTripToast:t(e=>{r({node:a(o,{children:a(_,{query:e.query,error:e.tripsError})})})},[r]),launchToastMessage:N}};return[()=>{b=g,C=I,w=N,y=A,e("default",E)},[e=>a=e.jsx,e=>(t=e.useCallback,i=e.useContext),e=>(d=e.default,n=e.UnsafeLocalize),e=>(o=e.ToastItem,s=e.Toast),e=>l=e.useMutation,e=>(c=e.AddItemToTrip,p=e.AddItemToMySaves),e=>_=e.default,e=>u=e.escapeHtml,e=>T=e.TripsImpression,e=>m=e.default,e=>h=e.useOnVisible,e=>v=e.buildPublicTripShareUrl]]},["21h32l","o4yt4q","7thqz4","tr3542","mqwhqn","ag9b0s","mc5s4b","irfizf","665v5s","6g4avl","3btuy0","iyqcwg"]]);
