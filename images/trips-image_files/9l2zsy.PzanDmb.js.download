(this.$WP=this.$WP||[]).push(["9l2zsy",(t,e)=>{var a,i,r,n,o,c,d,l,s,m,u,p,_,v,h,g,C,I,y,b,f,T,A,D,N,k,w,E,x,R,S,O,M,L,P,V,z,Y,B,U,q,H,j,W,G,Q,F,K,$,J,Z,X,tt,te,ta,ti,tr,tn,to,tc,td,tl,ts,tm,tu,tp,t_,tv,th,tg,tC,tI,ty,tb,tf,tT,tA,tD,tN,tk,tw,tE,tx,tR,tS,tO,tM,tL,tP,tV,tz,tY,tB={content:"YJlDY K M Mk",title:"VTyoU MH o",headerContainer:"HSuGR e"},tU=t=>{var e=a("div",{className:tB.title,children:a(d,{variant:t.titleVariant||"title-04",dataAttributes:{"data-automation":"trip_item_card_title"},children:t.title})});return i("div",{className:tB.headerContainer,children:[a(n,{labels:t.labels,title:e,href:t.itemLink,bubbleRating:t.reviewData?a("div",{"data-automation":"trip_item_card_rating","data-automation-review-count":t.reviewData?.reviewCount??null,"data-automation-rating":t.reviewData?.rating??null,children:a(c,{size:"small",rating:t.reviewData.rating,numReviews:t.reviewData.reviewCount})}):void 0,onClick:t.onClick}),t.content&&a("div",{className:tB.content,children:t.content})]})},tq={gaiDescriptionIcon:"bghvZ",descriptionContainer:"f",descriptionWrapper:"lCuqD"},tH=t=>{var{localize:e}=v(),r=u();return i("div",{className:tq.descriptionContainer,children:[t.isAIGenerated&&a(p,{className:tq.gaiDescriptionIcon,src:"/img2/trips/itinerary_description_icon_gai.svg","data-automation":"trip_card_description_gai_icon"}),a(l,{ctaNewline:!0,numLinesToShow:t.numLinesToShow||("MOBILE"===r?1:2),webkitLineClamp:!0,collapsible:!0,cta:a(m,{variant:"primary-small",marginTop:"spacing-02",dataAttributes:{"data-automation":"trip_card_description_read_more"},children:e.string("common_Read_more")}),ctaCollapse:a(m,{variant:"primary-small",marginTop:"spacing-02",dataAttributes:{"data-automation":"trip_card_description_read_less"},children:e.string("common_Readless")}),children:i("p",{className:tq.descriptionWrapper,children:[a(d,{elementType:"span",display:"inline",variant:"supporting-01",color:"secondaryText",dataAttributes:{"data-automation":"trip_card_description"},children:t.descriptionText}),t.isAIGenerated&&i(d,{elementType:"span",display:"inline",color:"placeholderText",variant:"supporting-01",dataAttributes:{"data-automation":"trip_card_description_ai_generated"},children:[" ",e.string("trips_cards_narration")]})]})})]})},tj={arrowContainer:"vdkQz _Q _Z",arrowLeft:"l",arrowRight:"_U"},tW=t=>{var[e,i]=y(0),r="MOBILE"===u(),n=e=>a(N,{source:t.photos?.[e],aspectRatio:"auto",width:"100%",height:"100%"}),c=t.travelersChoiceAwardData?.awardYear?a(k,{size:"large",color:"BOTB"===t.travelersChoiceAwardData.awardType?"yellow":"green",year:t.travelersChoiceAwardData.awardYear}):void 0;return a(o,{award:c,action:t.action,children:a("a",{href:t.itemLink,target:"_blank","aria-label":t.ariaLabel,children:r&&t.disableCarouselOnMobile||!r&&t.disableCarouselOnDesktop?n(0):a(w,{itemRenderer:n,totalCount:t.photos?.length||0,currentIndex:e,onNav:e=>{t.photos?.length&&i(e)},arrowSize:"small",nodeWrappers:{rightArrow:t=>a("div",{className:D(tj.arrowContainer,tj.arrowRight),children:t}),leftArrow:t=>a("div",{className:D(tj.arrowContainer,tj.arrowLeft),children:t})}})})})};function tG({tripId:t,itemId:e,saveObject:i,inViewport:r,isOwner:n,onClick:o,onSaveComplete:c,onUnsaveComplete:d,deferredUnsave:l}){return n?a(x,{deferredUnsave:l,tripId:t,itemId:e,saveObject:i,size:"medium",dataAttributes:{"data-automation":"trip_item_save_button"},onClick:()=>o?.("unsave"),onSaveComplete:c,onUnsaveComplete:d}):r?a(E,{id:i.id,type:i.type,size:"medium",position:"static",dataAttributes:{"data-automation":"trip_item_save_button"},onClick:()=>o?.("save"),onSaveComplete:c,onUnsaveComplete:d}):null}var tQ={__key:0xc1225817fc54,id:"c1225817fc54df5a",loc:{},definitions:[]},tF={__key:65578769458696,id:"3ba4bf42260878ae",loc:{},definitions:[]},tK={textInputContainer:"LmSFY f Q3",textInputContainerForImageCard:"Tfsqo",textInputContainerForContentCard:"YQDcy",textInputContainerActive:"WtLJo",textInputContainerInactive:"Jguek",avatar:"DRNVy",textInput:"CsSZo",addCommentButton:"VAaxI f u",addCommentButtonActive:"IENSa",addCommentButtonInactive:"YtuFw"},t$=({avatarUrl:t,variant:e,itemId:r,tripId:n,editComment:o,setEditComment:c})=>{var[d,l]=y(""),[{fetching:s},u]=M(tQ),[{fetching:p},h]=M(tF),[g]=b(V),C=B(n),{localize:I}=v(),{fragment:N}=q(),k=f(()=>U(N),[N]);T(()=>{l(o.body??"")},[o.body]);var w=0===d.length,E=A(()=>{g({node:a(z,{children:a(_,{id:"trips_general_error"})})})},[g]),x=()=>{s||(C({itemName:"AddCommentToItem",customData:{itemId:r??0,savesView:!k||"Saves"===k}}),u({request:{itemId:r??0,body:d}}).then(t=>{if(t.error)throw t.error;l("")}).catch(()=>{E()}))},R=()=>{p||(C({itemName:"SaveCommentEdit",customData:{itemId:r??0,comment:d,savesView:!k||"Saves"===k}}),h({request:{commentId:o.id??0,body:d}}).then(t=>{if(t.error)throw t.error;l(""),c({id:null,body:null})}).catch(()=>{E()}))};return i("div",{className:D(tK.textInputContainer,{[tK.textInputContainerActive]:!w,[tK.textInputContainerInactive]:w,[tK.textInputContainerForContentCard]:"CONTENT-CARD"===e,[tK.textInputContainerForImageCard]:"IMAGE-CARD"===e}),children:[a("div",{className:tK.avatar,children:a(L,{size:"xs",source:t??""})}),a("input",{type:"text",className:tK.textInput,"aria-label":I.string("trips_comment_section_comment_add_comment_placeholder"),placeholder:I.string("trips_comment_section_comment_add_comment_label"),value:d,onChange:t=>{l(t.target.value)},"data-automation":"trip_item_comment_input",maxLength:5e3,onKeyDown:t=>{"Enter"===t.key&&(o.body?R():x())}}),a(m,{disabled:w,onClick:o.body?R:x,"aria-label":I.string("trips_comment_section_submit"),"data-automation":"trip_item_comment_submit",children:p||s?a("div",{className:tK.addCommentButton,children:a(Y,{variant:"xsmall"})}):a("div",{className:D(tK.addCommentButton,{[tK.addCommentButtonActive]:!w,[tK.addCommentButtonInactive]:w}),children:a(P,{size:16,color:"secondaryIcon"})})})]})},tJ={commentContainer:"f Q2 _c",avatarWrapper:"GKKQl",readMore:"axpSy",actionMenuWrapper:"uoCTw"},tZ={__key:91396093991520,id:"531fcfb75a6038b8",loc:{},definitions:[]},tX=({itemId:t,commentId:e,body:i,tripId:r,setEditComment:n})=>{var[o]=b(V),c=B(r),{localize:d}=v(),[{fetching:l},s]=M(tZ),[{fetching:u},p]=M(tQ),{fragment:h}=q(),g=f(()=>U(h),[h]),C=A(()=>{o({node:a(z,{children:a(_,{id:"trips_general_error"})})})},[o]),I=A(()=>{var e=a(W,{onClick:()=>{u||(c({itemName:"UndoDeleteComment",customData:{itemId:t,savesView:!g||"Saves"===g}}),p({request:{itemId:t,body:i}}).then(t=>{if(t.error)throw t.error}).catch(()=>{C()}))},children:a(_,{id:"stat_modal_undo"})});o({node:a(z,{cta:e,children:a(_,{id:"trips_comment_section_comment_deleted"})})})},[o,i,C,t,u,p,c,g]),y=[{onClick:()=>{c({itemName:"EditItemComment",customData:{itemId:t,savesView:!g||"Saves"===g}}),n({id:e,body:i})},content:d.string("trips_comment_section_edit_comment"),key:"edit-comment",icon:Q,dataAttributes:{"data-automation":"trip_item_comment_edit"}},{onClick:()=>{l||(c({itemName:"DeleteComment",customData:{itemId:t,savesView:!g||"Saves"===g}}),s({commentIds:e}).then(t=>{if(t.error)throw t.error;I()}).catch(()=>{C()}))},content:d.string("trips_comment_section_delete_comment"),key:"delete-comment",icon:G,iconColor:"dangerIcon",textColor:"dangerText",dataAttributes:{"data-automation":"trip_item_comment_delete"}}];return a(H,{items:y,above:!0,alignEdge:"right",children:(t,e)=>a(m,{ref:t,onClick:e,"aria-label":d.string("trips_comment_section_comment_action_menu"),"data-automation":"trip_item_comment_action_menu",children:a("div",{className:"yejfy f j u Rc",children:a(j,{size:18})})})})},t0=({itemId:t,commentId:e,author:r,body:n,tripId:o,setEditComment:c,index:s})=>{var{localize:u}=v(),p=R();if(!t||!e||!n||!r.userId||!r.displayName)return null;var _=p===r.userId,h=a(m,{variant:"primary-small",marginTop:"spacing-01",dataAttributes:{"data-automation":"trip_item_comment_read_more"},children:u.string("common_Read_more")}),g=a(m,{variant:"primary-small",marginTop:"spacing-01",dataAttributes:{"data-automation":"trip_item_comment_read_less"},children:u.string("common_Readless")});return i("div",{className:tJ.commentContainer,"data-automation":`trip_item_comment_${s}`,children:[a("div",{className:tJ.avatarWrapper,children:a(L,{size:"xs",source:r.avatarUrl??""})}),a("div",{className:tJ.readMore,children:i(l,{ctaNewline:!0,numLinesToShow:4,webkitLineClamp:!0,collapsible:!0,cta:h,ctaCollapse:g,children:[a(d,{display:"inline",variant:"supporting-03",dataAttributes:{"data-automation":"trip_item_comment_author_name"},children:r.displayName??u.string("trips_comment_section_unknown_user")}),i(d,{display:"inline",variant:"supporting-01",dataAttributes:{"data-automation":"trip_item_comment_text"},children:[" ",n]})]})}),_&&a("div",{className:tJ.actionMenuWrapper,children:a(tg,{tripId:o,itemId:t,commentId:e,body:n,setEditComment:c})})]})},t1={commentSectionContainer:"_Z f e k",commentsWrapper:"sWhSj f e Q3 MJ",commentsWrapperForImageCard:"edEdS",addCommentWrapper:"XryEh"},t2=({comments:t,variant:e,itemId:r,actionPermissions:n,tripId:o,onExpandComments:c})=>{var d=R(),[l,s]=y({id:null,body:null}),[u,p]=y(!1),[_]=O({query:S,variables:{userId:d}}),{localize:h}=v(),g=t||[],C=g.slice(Math.max(0,g.length-2),g.length),I=!!g.length,b=C.length<g.length,f=!!l.body,T=g.some(t=>t?.comment?.author?.userId===d),A=_.data?.memberProfiles?.[0]?.avatar?.photoSizes?.[0]?.url??null;return i("div",{className:t1.commentSectionContainer,children:[I?i("div",{className:D(t1.commentsWrapper,{[t1.commentsWrapperForImageCard]:"IMAGE-CARD"===e}),children:[(u?g:C).map((t,e)=>a(tC,{author:{userId:t?.comment?.author?.userId??null,avatarUrl:t?.comment?.author?.avatar?.__typename==="MemberProfile_MediaId"&&t?.comment?.author?.avatar?.data?.__typename==="Media_PhotoResult"&&t?.comment?.author?.avatar?.data?.sizes?.[0]?t?.comment?.author?.avatar?.data?.sizes?.[0]?.url:null,displayName:t?.comment?.author?.displayName??null},itemId:r,commentId:t?.comment?.id??null,body:t?.comment?.body??null,setEditComment:s,index:e,tripId:o},t?.comment?.id)),b&&a(m,{leftAlign:!0,onClick:()=>{p(t=>!t),c?.(!u)},"data-automation":"trip_item_comment_section_expand_collapse_button",children:u?h.string("trips_comment_section_see_less"):h.string("trips_comment_section_see_all")})]}):a("div",{}),n?.canEdit&&(!T||f)&&a("div",{className:t1.addCommentWrapper,children:a(th,{tripId:o,itemId:r,variant:e,avatarUrl:A,editComment:l,setEditComment:s})})]})},t5={triggerText:"Wb",dayRow:"APjaC k",dayText:"Vdotj",timeSection:"aUYKD I",tooltipContents:"DYmox e Q2",timeText:"ejHyH I",modalContent:"ekQpW"},t3=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],t6=({hourOptions:t})=>{var[e,n]=y(!1),{localize:o}=v(),c=u(),l=h();if(T(()=>{"MOBILE"!==c&&e&&n(!1)},[c,e]),!(t||[]).some(t=>t.timeIntervals?.length))return null;var s=t=>{var{hours:e,minutes:a}=t,i=new Date;return i.setHours(e||0),i.setMinutes(a||0),l.formatDate("time_12_24",i)},p=t=>{switch(t){case"MONDAY":return o("monday_52");case"TUESDAY":return o("tuesday_52");case"WEDNESDAY":return o("wednesday_52");case"THURSDAY":return o("thursday_52");case"FRIDAY":return o("friday_52");case"SATURDAY":return o("saturday_52");case"SUNDAY":return o("sunday_52");default:return""}},_=a(d,{variant:"supporting-01",dataAttributes:{"data-automation":"trip_item_see_hours"},children:a("span",{className:t5.triggerText,children:o.string("trips_cards_see_hours")})}),g=t=>t?a("div",{className:t5.timeSection,children:t.openingTime&&t.closingTime&&a("div",{className:t5.timeText,children:a(d,{variant:"body-01",dataAttributes:{"data-automation":"trip_item_hours"},children:`${s(t.openingTime)} - ${s(t.closingTime)}`})},t?.openingTime.hours)}):a("div",{className:t5.timeSection,children:a(d,{variant:"body-01",dataAttributes:{"data-automation":"trip_item_closed_label"},children:o.string("trips_cards_closed")})}),C=t=>a("div",{className:t5.dayText,children:t?a(d,{variant:"body-01",dataAttributes:{"data-automation":"trip_item_hours_day"},children:p(t)}):a("div",{})}),I=[];t3.forEach(e=>{var a=t?.find(t=>t.day===e);a?.timeIntervals?.length||I.push({day:e,dayText:e,hours:null}),a?.timeIntervals?.forEach((t,a)=>{I.push({day:e,dayText:0===a?e:null,hours:t})})});var b=a("div",{className:t5.tooltipContents,children:I.map((t,e)=>{var a=`${e} - ${t.day}`;return i("div",{className:t5.dayRow,"data-automation":`trip_item_hours_day_${t.day}_${e}`,children:[C(t.dayText),g(t.hours)]},a)})});return a($,{icon:F,content:"MOBILE"!==c?a(X,{fitToContent:"expand",triggeringElement:_,content:b,variant:"top-caret",alignment:"left"}):i(r,{children:[a(m,{variant:"primary-small",onClick:()=>{n(!0)},dataAttributes:{"data-automation":"trip_item_see_hours_button"},children:_}),e&&a(tt,{slideFrom:"bottom",onClose:()=>n(!1),isOpen:e,bodyContentClass:t5.modalContent,children:b})]})})},t9=(t,e)=>{switch(t){case"EATERY":return e("common_Restaurant_3dd");case"ATTRACTION":return e("common_Attraction_3dd");case"ACCOMMODATION":return e("common_Hotel");case"ACTIVITY":return e("attractions.tickets_and_tours");case"NEIGHBORHOODS":return e("attractiontype.name.v3.34");default:return null}},t7=t=>{var{reviewSummary:e}=t,{rating:a,ratingCounts:i}=e||{},r=i&&i.reduce((t,e)=>"number"==typeof t&&"number"==typeof e?t+e:t,0);return a&&r?{reviewCount:r,rating:a}:void 0},t4={__key:0x65b172fed965,id:"65b172fed965037d",loc:{},definitions:[]};function t8({tripItem:t,pauseQuery:e},a){var{localize:i}=v(),{price:r,duration:n}=function({locationId:t},e=!1){var[{fetching:a,data:i}]=O({query:t4,variables:{locationId:t,currency:g()},pause:e});return{loading:a,price:i?.attraction?.[0]?.details?.minTicketPriceInfo?.price,duration:i?.attraction?.[0]?.details?.recommendedVisit}}({locationId:Number(t.locationId)},e||!t.locationId||a);return{bookingData:r?{ctaTitle:i.string("trips_commerce_see_options"),ctaLink:t.route?.url||"",description:i.string("trips_commerce_description")}:void 0,duration:n}}var et=({tripItem:t,variant:e="standard",pauseQuery:n=!1})=>{var{localize:o}=v(),{hoursOfOperation:c,locationV2:l}=t,{duration:s}=t8({tripItem:t,pauseQuery:n}),m=i("div",{className:"_W K Q1",children:[a(d,{variant:"supporting-01",children:o.string("trips_trip_item_card_duration")}),s]}),u=t9("ATTRACTION",o),p=l?.tags?.tags?.[0];return i(r,{children:[a($,{content:p?.tag?.localizedName||u,icon:p?.tagId?Z(p.tagId,K):K,dataAttributes:{"data-automation":"trip_item_destination"}}),"minimal"!==e&&s&&a($,{content:m,icon:F,dataAttributes:{"data-automation":"trip_item_duration"}}),"extended"===e&&c?.dailyTimeIntervals&&a(ty,{hourOptions:c?J(c):null,itemId:t.locationId})]})},ee=t=>{if(t.locationV2?.details?.__typename!=="LocationSelection_AttractionProductDetails")return null;var e=t.locationV2.details.productDetails?.displayDuration;return e?a(ta,{variant:"long",flexibleDisplayDuration:"from"in e?e:null,fixedDisplayDuration:"durationInMinutes"in e?e:null}):null},ea=({tripItem:t,variant:e="standard"})=>{var{hoursOfOperation:n}=t,o=ee(t),{localize:c}=v();return i(r,{children:[a($,{content:t9("ACTIVITY",c),icon:te,dataAttributes:{"data-automation":"trip_item_place_type"}}),o&&a($,{content:o,icon:F,dataAttributes:{"data-automation":"trip_item_duration"}}),"extended"===e&&n?.dailyTimeIntervals&&a(ty,{hourOptions:J(n)??null,itemId:t.locationId})]})},ei=({tripItem:t})=>a($,{content:t.locationV2?.names?.longOnlyHierarchyTypeaheadV2,icon:ti,dataAttributes:{"data-automation":"trip_item_geo_location"}}),er=t=>{switch(t){case"HOTEL":return 1;case"BB":return 2;case"OTHER":return 3;case"COLLAPSED_BB_INN":return 99;case"VR":return 6;default:return 0}},en=({accommodationCategory:t,popIndexRank:e,popIndexTotal:i,parentName:r})=>t&&r&&e&&i&&!(i<2)?a(d,{variant:"supporting-01",dataAttributes:{"data-automation":"trip_item_pop_index"},children:a(C,{id:"common_n_of_n_lodgingtype_in_geo_pl",args:{1:e,2:i,3:er(t),4:r}})}):null,eo={popIndex:"w"},ec=({tripItem:t,variant:e="standard",withPopIndex:n})=>{var{localize:o}=v(),c=t.detail?.__typename==="Hotel"?t.detail?.hotel?.providerStarRating:void 0,d=t.localizedStreetAddress?.street1;return i(r,{children:[a($,{content:c?o.string("trips_cards_star_hotel",{nHotelClass:c}):o.string("trips_cards_hotel"),icon:tr,dataAttributes:{"data-automation":"trip_item_place_type"}}),"minimal"!==e&&d&&a($,{content:d,icon:ti,dataAttributes:{"data-automation":"trip_item_address"}}),"minimal"!==e&&n&&a("div",{className:eo.popIndex,children:a(en,{accommodationCategory:t.accommodationCategory,parentName:t.geoName,popIndexRank:t.popIndexDetails?.popIndexRank,popIndexTotal:t.popIndexDetails?.popIndexTotal})})]})},ed=({tripItem:t,pauseQuery:e=!1,variant:n="standard"})=>{var{localize:o}=v(),c=t9("NEIGHBORHOODS",o),{duration:l}=t8({tripItem:t,pauseQuery:e},"minimal"===n),s=i("div",{style:{display:"inline-flex"},children:[a(d,{variant:"supporting-01",marginRight:"spacing-01",dataAttributes:{"data-automation":"trip_item_card_duration_label"},children:o.string("trips_trip_item_card_duration")}),l]});return i(r,{children:[a($,{content:c,icon:tn,dataAttributes:{"data-automation":"trip_item_place_type"}}),l&&a($,{content:s,icon:F,dataAttributes:{"data-automation":"trip_item_duration"}})]})},el=({tripItem:t,restaurantsHourOptionsMap:e})=>{if(t.hoursOfOperation?.dailyTimeIntervals)return a(ty,{hourOptions:J(t.hoursOfOperation)??null,itemId:t.locationId});var i=e?.get(Number(t.locationId));return i?a(ty,{hourOptions:i,itemId:t.locationId}):null},es=({tripItem:t,restaurantsHourOptionsMap:e,variant:n="standard"})=>{var{localize:o}=v(),c=t9("EATERY",o),l=t.cuisines?.slice(0,2)||[],s=[...("minimal"!==n?l:[]).map(t=>t?.localizedName),"extended"===n?t.price?.[0]?.localizedName:null].filter(Boolean),m=tN({tripItem:t,restaurantsHourOptionsMap:e});return i(r,{children:[a($,{content:c,icon:tc,dataAttributes:{"data-automation":"trip_item_place_type"}}),s.length>0&&a($,{content:a(d,{variant:"supporting-01",display:"inline",children:s.join(" • ")}),icon:to,dataAttributes:{"data-automation":"trip_item_cuisines"}}),"extended"===n?m:null]})},em=({tripItem:t,variant:e="standard"})=>{var{localize:n}=v(),o=n.string("trips_cards_vacation_rental"),c=t.locationV2?.accommodationType?.name,l=t.localizedStreetAddress?.street1;return i(r,{children:[a($,{content:o,icon:td,dataAttributes:{"data-automation":"trip_item_place_type"}}),"minimal"!==e&&l&&a($,{content:l,icon:ti,dataAttributes:{"data-automation":"trip_item_address"}}),"minimal"!==e&&c?i(d,{variant:"supporting-01",display:"inline",dataAttributes:{"data-automation":"trip_item_accommodation_type"},children:[" • ",c]}):null]})},eu=({item:t,size:e})=>{var i=t.locationV2?.tags?.tags?.find(t=>t?.tagId===tl),r=t.locationV2?.tags?.tags?.[0];if(i)return a(tn,{size:e});if(t.isGeo)return a(ti,{size:e});var n=r?.tagId?Z(r.tagId,K):K;switch(t.placeType){case"ACTIVITY":return a(te,{size:e});case"ATTRACTION":return a(n,{size:e});case"EATERY":return a(tc,{size:e});case"ACCOMMODATION":if("VR"===t.accommodationCategory)return a(td,{size:e});return a(tr,{size:e});default:return null}},ep=({item:t,restaurantsHourOptionsMap:e,variant:i="standard",pauseQuery:r=!1,tripDateType:n,withPopIndex:o=!0})=>{if(t.locationV2?.tags?.tags?.find(t=>t?.tagId===tl))return a(tD,{tripItem:t,pauseQuery:r,variant:i});if(t.isGeo)return a(tT,{tripItem:t});switch(t.placeType){case"ACTIVITY":return a(tf,{tripItem:t,variant:i});case"ATTRACTION":return a(tb,{tripItem:t,variant:i,pauseQuery:r});case"EATERY":return a(tk,{tripItem:t,variant:i,restaurantsHourOptionsMap:e});case"ACCOMMODATION":if("VR"===t.accommodationCategory)return a(tw,{tripItem:t,variant:i});return a(tA,{tripItem:t,variant:i,withPopIndex:!!o&&"DATES"!==n});default:return null}},e_={commerceContainer:"cSRUU f u k",topBorder:"rzBFn",buttonContainer:"QcpEZ o q"},ev=t=>{var e=t.ctaLink&&t.ctaTitle?a("div",{className:e_.buttonContainer,children:a(s,{variant:"secondary-commerce",size:"small",href:t.ctaLink,target:"_blank",dataAttributes:{"data-automation":"trip_item_commerce_cta_button"},onClick:t.onCTAClick,children:a(d,{variant:t.ctaVariant||"button-03",children:t.ctaTitle})})}):void 0,r=a(d,{variant:"supporting-03",dataAttributes:{"data-automation":"trip_item_commerce_description"},children:t.description});return i(eh,{borderPosition:t.borderPosition,children:[r,e]})},eh=({children:t,borderPosition:e="left"})=>a("div",{className:D(e_.commerceContainer,{[e_.topBorder]:"top"===e}),children:t});function eg(t,e){if(e.length<t)throw TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function eC(t){eg(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):(("string"==typeof t||"[object String]"===e)&&"undefined"!=typeof console&&Error().stack,new Date(NaN))}function eI(t){return eg(1,arguments),!isNaN(eC(t))}function ey(t){return eg(1,arguments),eC(t).getTime()<Date.now()}function eb({location:t,date:e,pauseQuery:i=!1,variant:r="inline"}){var{localize:n}=v(),o=i||!function(t){var e,{from:a,to:i}=t||{};if(!a||!i)return!1;var r=new Date(a),n=new Date(i);return!(!eI(r)||!eI(n)||ey(r))&&(e=Date.UTC(r.getFullYear(),r.getMonth(),r.getDate()),30>Math.floor((Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())-e)/864e5))}(e),{price:c,loading:l,rawPrice:s}=ts({location:t,checkInDate:e?.from??"",checkOutDate:e?.to??"",adults:2,rooms:1},o);return l?a(Y,{variant:"small","aria-label":n.string("trips_hotel_price_card_loading_price")}):c&&!o?"block"===r?a(d,{variant:"supporting-02",display:"inline-block",dataAttributes:{"data-automation":"trip_item_hotel_price"},children:a(_,{id:"trips_hotel_price_dated",args:{price:a(d,{elementType:"div",variant:"title-04",children:s})}})}):a(d,{variant:"title-05",display:"inline-block",dataAttributes:{"data-automation":"trip_item_hotel_price"},children:c}):null}var ef=({tripItem:t,trip:e,pauseQuery:i=!1,onCommerceClick:r,borderPosition:n,priceVariant:o,ctaVariant:c})=>{var{localize:d}=v(),l=e?.date?.type==="DATES"?{ctaTitle:d.string("trips_commerce_see_rates"),ctaLink:t.route?.url||"",description:a(eb,{location:t,date:e.date,pauseQuery:i,variant:o})}:void 0;return l?a(tR,{ctaVariant:c,borderPosition:n,ctaTitle:l.ctaTitle,ctaLink:l.ctaLink,description:l.description,onCTAClick:r}):null},eT=({description:t,ctaText:e,ctaLink:r,onCTAClick:n,variant:o="block"})=>t&&e&&r?i("div",{className:D("tQJio G",{epkwD:"inline"===o}),children:[a("div",{className:"AdXEG",children:a(te,{size:20})}),a("div",{className:"VOCwX",children:a(d,{variant:"supporting-01",dataAttributes:{"data-automation":"trip_item_attraction_gai_commerce_description"},children:t})}),a("div",{className:"qCbsx",children:a(m,{variant:"primary-small",href:r,leftAlign:!0,target:"_blank",dataAttributes:{"data-automation":"trip_item_attraction_gai_commerce_cta"},onClick:n,children:e})})]}):null,eA=({description:t,ctaText:e,ctaLink:r,onCTAClick:n,variant:o})=>t&&e&&r?i("div",{className:D("WVEJi f G",{LXZDQ:"inline"===o}),children:[a(d,{variant:"supporting-01",dataAttributes:{"data-automation":"trip_item_attraction_non_gai_commerce_description"},children:t}),a(m,{variant:"primary-small",href:r,leftAlign:!0,target:"_blank",dataAttributes:{"data-automation":"trip_item_attraction_non_gai_commerce_cta"},onClick:n,children:e})]}):null,eD=({tripItem:t,isAIGenerated:e=!1,recommendedProduct:i,pauseQuery:r=!1,borderPosition:n,gaiVariant:o,variant:c})=>{var{localize:d}=v(),l=h(),{bookingData:s}=t8({tripItem:t,pauseQuery:r||e});if(e){var{pricingInfo:m,route:u,title:p}=i??{};if(m?.fromPrice&&u?.url&&p?.text){var _=l.formatCurrency(m.fromPrice),g="UNIT"===m.pricingType?d.string("phoenix_list_attractions_from_price_per_group_txt_v2",{price:_}):d.string("phoenix_product_attractions_from_price_per_person_txt_v2",{price:_});return a(eh,{borderPosition:n,children:a(tO,{variant:o,description:p.text,ctaText:g,ctaLink:u.url})})}return null}return s?.ctaTitle&&s?.ctaLink&&s?.description?a(eh,{borderPosition:n,children:a(tM,{variant:c,description:s.description,ctaLink:s.ctaLink,ctaText:s.ctaTitle})}):null},eN={__key:0x5bb4e9777a6d,id:"5bb4e9777a6d5aa7",loc:{},definitions:[]};function ek({locationId:t,checkInDate:e,checkOutDate:i,pauseQuery:r=!1,variant:n}){var{price:o,loading:c}=function({locationId:t,checkInDate:e,checkOutDate:a,adults:i=2},r=!1){var[{fetching:n,data:o}]=O({query:eN,variables:{request:{propertyId:t,arrival:e,departure:a,adults:i}},pause:r||t<0||!e||!a||ey(new Date(e))}),c=o?.RentalInformation_getRentalRate?.[0]?.rentalRate,d=c?.errors?.length,l=c?.subtotal;return{loading:n,price:d?null:l}}({locationId:t,checkInDate:e,checkOutDate:i,adults:2},r);return c?a(Y,{variant:"small","aria-label":"Loading price"}):o?"block"===n?a(d,{variant:"supporting-02",children:a(_,{id:"trips_commercer_price_per_night",args:{sPrice:a(d,{elementType:"div",variant:"title-04",children:o})}})}):a(_,{id:"trips_commercer_price_per_night",args:{sPrice:o}}):null}var ew=({tripItem:t,trip:e,pauseQuery:i=!1,onCommerceClick:r,borderPosition:n,ctaVariant:o,priceVariant:c})=>{var d=e?.date?.type==="DATES"?{ctaTitle:"See rates",ctaLink:t.route?.url||"",description:a(ek,{variant:c,locationId:t.locationId||-1,checkInDate:e?.date?.from||"",checkOutDate:e?.date?.to||"",pauseQuery:i})}:void 0;return d?.ctaTitle&&d?.ctaLink&&d?.description?a(tR,{ctaVariant:o,borderPosition:n,onCTAClick:r,ctaTitle:d.ctaTitle,ctaLink:d.ctaLink,description:d.description}):null},eE=({tripItem:t,onCommerceClick:e,borderPosition:i,ctaTitle:r,variant:n="inline",ctaVariant:o})=>{var c=h(),{localize:l}=v();if(t.locationV2?.details?.__typename!=="LocationSelection_AttractionProductDetails")return null;var s=t.locationV2.details.productDetails?.pricingInfo;return s?.fromPrice&&t.route?.url?a(tR,{ctaVariant:o,ctaTitle:r||l.string("trips_commerce_see_options"),ctaLink:t.route.url,onCTAClick:e,borderPosition:i,description:a(d,{variant:"supporting-01",dataAttributes:{"data-automation":"attraction_product_commerce_element"},children:"block"===n?a(tu,{size:"small",price:s.fromPrice,isPerGroupPricing:"UNIT"===s.pricingType}):a(tm,{price:a(d,{variant:"supporting-03",display:"inline-block",children:c.formatCurrency(s.fromPrice)}),isPerGroupPricing:"UNIT"===s.pricingType})})}):null},ex=({tripItem:t,trip:e,isAIGenerated:i,recommendedProduct:r,pauseQuery:n=!1,onCommerceClick:o,borderPosition:c})=>{switch(t.placeType){case"ATTRACTION":return a(tL,{tripItem:t,isAIGenerated:i,recommendedProduct:r,pauseQuery:n,borderPosition:c});case"ACTIVITY":return a(tV,{borderPosition:c,tripItem:t,onCommerceClick:o});case"ACCOMMODATION":if("VR"===t.accommodationCategory)return a(tP,{tripItem:t,trip:e,pauseQuery:n,onCommerceClick:o,borderPosition:c});return a(tS,{tripItem:t,trip:e,pauseQuery:n,onCommerceClick:o,borderPosition:c});default:return null}},eR=(t,e,a)=>e===a?t:"MILES"===e&&"KILOMETERS"===a?1.60934*t:"MILES"===e&&"FEET"===a?5280*t:"KILOMETERS"===e&&"METERS"===a?1e3*t:.621371*t,eS=(t,e,a)=>{var i=t.latitude*tY,r=e.latitude*tY,n=Math.sin((e.latitude-t.latitude)*tY/2),o=Math.sin((e.longitude-t.longitude)*tY/2),c=n*n+Math.cos(i)*Math.cos(r)*o*o;return eR(6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))),"KILOMETERS",a)},eO=()=>I()?"MILES":"KILOMETERS";return t("CardSaveButton",tG),[()=>{tp=tU,t_=tH,tv=tW,th=t$,tg=tX,tC=t0,tI=t2,ty=t6,tb=et,tf=ea,tT=ei,tA=ec,tD=ed,tN=el,tk=es,tw=em,tE=eu,tx=ep,tR=ev,tS=ef,tO=eT,tM=eA,tL=eD,tP=ew,tV=eE,tz=ex,tY=Math.PI/180,t({AttractionCommerceElement:tL,AttractionGaiCommerce:tO,AttractionIconContent:tb,AttractionNonGaiCommerce:tM,AttractionProductCommerceElement:tV,AttractionProductIconContent:tf,CardCommentElement:tI,CardCommerceElement:tR,CardDescriptionElement:t_,CardHeaderElement:tp,CardMediaElement:tv,CardSaveButton:tG,GeoIconContent:tT,HotelCommerceElement:tS,HotelIconContent:tA,NeighborhoodIconContent:tD,RestaurantIconContent:tk,TripLocationCommerceElement:tz,TripLocationIcon:tE,TripLocationIconContent:tx,VacationRentalCommerceElement:tP,VacationRentalIconContent:tw,convertDistance:eR,getLocationReviewData:t7,haversineDistance:eS,reverseMapAccommodationCategory:er,useDistanceUnit:eO})},[t=>(a=t.jsx,i=t.jsxs,r=t.Fragment),t=>(n=t.CardHeader,o=t.CardMedia),t=>c=t.BubbleRatingWithReviewCount,t=>d=t.default,t=>l=t.ReadMore,t=>(s=t.default,m=t.BorderlessButton),t=>u=t.useViewportCategory,t=>p=t.CdnImage,t=>(_=t.default,v=t.useLocalize,h=t.useIntlFormatter,g=t.useCurrency,C=t.UnsafeLocalize,I=t.useIsMiles),t=>(y=t.useState,b=t.useContext,f=t.useMemo,T=t.useEffect,A=t.useCallback),t=>D=t.default,t=>N=t.default,t=>k=t.default,t=>w=t.default,t=>E=t.default,t=>x=t.default,t=>R=t.useUserId,t=>S=t.GetUserAvatar,t=>O=t.useQuery,t=>M=t.useTripMutation,t=>L=t.Avatar,t=>P=t.default,t=>(V=t.Toast,z=t.ToastItem),t=>Y=t.Spinner,t=>B=t.useSavesInteractionLogger,t=>U=t.getTripPageTabFromFragment,t=>q=t.useRoute,t=>H=t.PopoverMenu,t=>j=t.default,t=>W=t.default,t=>G=t.default,t=>Q=t.default,t=>F=t.default,t=>K=t.default,t=>($=t.IconDetail,J=t.convertToHourOptions),t=>Z=t.getAttractionIcon,t=>X=t.HoverTooltip,t=>tt=t.default,t=>te=t.default,t=>ta=t.ProductDuration,t=>ti=t.default,t=>tr=t.default,t=>tn=t.default,t=>to=t.default,t=>tc=t.default,t=>td=t.default,t=>tl=t.NEIGHBORHOOD_TAG_ID,t=>ts=t.useHotelPrice,t=>(tm=t.default,tu=t.PriceBlock)]]},["21h32l","6m9vgr","bkeq24","essqvy","wgun1f","jppfwt","ys6v1o","s6q22n","7thqz4","o4yt4q","fkji80","34bu7w","p9ucm8","2rns1i","dpzonz","ns8l5r","52far5","ag9b0s","mqwhqn","r6ayw2","ljqkwp","obrjv3","tr3542","qndsds","sa2a6q","iyqcwg","fgwvq1","s2gl90","mvpl5y","6g4avl","d3i8k1","55gplo","w1yg77","55nvbk","70j2tf","j2ln1o","xm2jzo","z2nh2s","s1ymgp","bug23c","bp96i9","c5q3iu","o80y56","p3y1zq","o3mm96","3aiijo","3309mt","vtj79r","ec91du"]]);
