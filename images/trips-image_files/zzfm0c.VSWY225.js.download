(this.$WP=this.$WP||[]).push(["zzfm0c",(e,t)=>{var r,a,n,o,i,l,s,c,u,m,p,d,g,k,v,y,I,T,h,f,b,w,N,S,D=()=>n(y),O=e=>{var{customData:t,...r}=e;return t&&Object.keys(t).length?{...r,customData:JSON.stringify(t)}:r},$=e=>{var{customData:t,...r}=e;return t&&Object.keys(t).length?{...r,customData:JSON.stringify(t)}:r},C=(e,t,r)=>o(()=>({logImpression:t=>e(O(t)),logInteraction:e=>t($(e)),logInteractionNow:e=>r($(e))}),[e,t,r]),P=()=>C(c(),u(),m()),j=e=>{var t=new Set;return r=>{var a=!t.has(r);return a&&(t.add(r),setTimeout(()=>{t.delete(r)},e)),a}},x=e=>{var t=new Map;return{get:e=>t.get(e)?.value,set:(r,a)=>{clearTimeout(t.get(r)?.tid),t.set(r,{value:a,tid:setTimeout(()=>{t.delete(r)},e)})}}},G=(e,t)=>{var{type:r="click",subType:a,customData:n,itemName:o,itemType:i,itemId:l,itemGroup:s}=t,{customData:c,...u}=e,m={...c||{},...n||{}},p={...u,actionType:r};return null!=a&&(p.actionSubType=a),Object.keys(m).length&&(p.customData=m),null!=o&&(null!=p.itemName?console.error(`Ignored attempt to overwrite itemName "${p.itemName}" with "${o}"`):p.itemName=o),null!=i&&(null!=p.itemType?console.error(`Ignored attempt to overwrite itemType "${p.itemType}" with "${i}"`):p.itemType=i),null!=l&&(null!=p.itemId?console.error(`Ignored attempt to overwrite itemId "${p.itemId}" with "${l}"`):p.itemId=l),null!=s&&(null!=p.itemGroup?console.error(`Ignored attempt to overwrite itemId "${p.itemGroup}" with "${s}"`):p.itemGroup=s),p},L=()=>{var{eventBase:e}=D(),t=b.current();return o(()=>null==e?(console.error("useTracking() called outside of a valid <TrackingScope>, no tracking will occur"),{trackImpression:()=>{},trackInteraction:e=>{console.error("trackInteraction() called outside of a valid <TrackingScope>, impression will not be tracked",e)},trackInteractionNow:e=>(console.error("trackInteractionNow() called outside of a valid <TrackingScope>, impression will not be tracked",e),Promise.reject())}):{trackImpression:()=>{f(JSON.stringify(e))&&t.logImpression(e)},trackInteraction:r=>{var a=G(e,r);f(JSON.stringify(a))&&t.logInteraction(a)},trackInteractionNow:r=>{var a=G(e,r),n=JSON.stringify(a),o=h.get(n);if(o)return o;var i=t.logInteractionNow(a);return h.set(n,i),i}},[e,t])},J=e=>{var t=L();return o(()=>{var{trackInteraction:r,trackInteractionNow:a}=t;return{trackInteraction:()=>r(e),trackInteractionNow:()=>a(e)}},[t,e])},B=e=>{var{trackImpression:t}=L();return function(e,t=T,r=p){var{timeout:a,threshold:n,rootMargin:o,onceOnly:s}={...T,...t},[c,u]=i(!1),[m,d]=i(!1);return l(()=>{if(c){var t=setTimeout(()=>{m&&s||(e(),d(!0))},a);return()=>{clearTimeout(t)}}return()=>{}},[c,m,s,e,a]),r(u,o,n)}(t,e||void 0)},K=["page"],M=(e,t)=>"standalone"===e||(N.get(e)||K).includes(t),z=e=>{var{scopeType:t,team:r,pageName:a,pageGeoId:n,pageLocationId:o,filterId:i,filterIndex:l,shelfId:s,shelfType:c,shelfSlot:u,shelfSlotIndex:m,cardId:p,cardIndex:d,cardType:g,cardExternalKey:k,itemType:v,itemId:y,itemSlot:I,itemSlotIndex:T,itemExternalKey:h,saItemType:f,saItemName:b,saItemId:w,saItemGroup:N,saItemPosition:S,saExternalKey:D,customData:O}=e,$={team:r,page:a};null!=n&&($.geoId=n),null!=o&&($.locationId=o);var C=O?{...O}:{};switch(t){case"map":$.itemType=t;break;case"filter":case"mapFilter":$.itemType=t,$.itemId=i,null!=l&&($.itemPosition=l);break;case"shelf":$.itemType=t,$.itemName=c,$.itemId=s?.toString(),$.itemGroup=u,$.itemPosition=m;break;case"shelfCard":$.itemType=t,$.itemName=g,$.itemId=p?.toString(),$.itemPosition=d,$.itemGroup=c,null!=k&&($.externalKey=k),C.shelfType=c,C.shelfId=s?.toString(),C.shelfSlot=u,C.shelfSlotIndex=m;break;case"listCard":case"mapListCard":$.itemType=t,$.itemId=p?.toString(),$.itemPosition=d,null!=k&&($.externalKey=k),C.cardType=g;break;case"item":$.itemType=t,$.itemName=v,$.itemId=y?.toString(),null!=I&&($.itemGroup=I),null!=T&&($.itemPosition=T),null!=h&&($.externalKey=h);break;case"standalone":$.itemType=null==f?"standalone":f,null!=b&&($.itemName=b),null!=w&&($.itemId=w),null!=N&&($.itemGroup=N),null!=S&&($.itemPosition=S),null!=D&&($.externalKey=D)}return 0!==Object.keys(C).length&&($.customData=C),$},q=({children:e,options:t})=>r("span",{ref:S.current(t),children:e}),E=(e,t)=>{var r=t?.scopeType==="standalone"?{...t.customData||{}}:{...e.customData||{},...t.customData||{}};return t?.scopeType==="standalone"?{...t,...Object.keys(r).length?{customData:r}:{}}:{...e,...t,...Object.keys(r).length?{customData:r}:{}}},F=e=>{var{scope:t,impressionWhenSeen:a=!0,children:n}=e,i=D(),s=i?.scope?.scopeType,c=M(t.scopeType,s),u=o(()=>{if(!c)return v;if(i?.scope==null)return"page"===t.scopeType||"standalone"===t.scopeType?{scope:t,eventBase:z(t)}:v;var e=E(i.scope,t);return{scope:e,eventBase:z(e)}},[t,i,c]),{scopeType:m}=t;return l(()=>{c||console.error(`Ignoring ${m} scopeType, as it cannot be a child of ${s} scopeType`)},[c,m,s]),c?r(y.Provider,{value:u,children:a?r(q,{options:"object"==typeof a?a:void 0,children:n}):n}):n},W=e=>{var{target:t,tracking:r,onClick:a,onClickCritical:n,href:o}=e,{isCritical:i,...l}=r||{},c=J(l),u=k();return s(e=>{var r="_self"===t&&null!=o,l=[],s=[];r&&!0===i?l.push(()=>c.trackInteractionNow()):s.push(()=>c.trackInteraction()),null!=n&&(r?l.push(n):s.push(n)),a&&s.push(a),l.length&&(e.preventDefault(),Promise.all(l.map(e=>e())).then(()=>{null!=o&&u(o)})),s.map(e=>e())},[t,o,c,i,a,n,u])},V=e=>{var{target:t="newTabDesktop",tracking:a,onClick:n,onClickCritical:o,href:i,children:l,...s}=e,c=g(t),u=W({target:c,href:i,onClick:n,onClickCritical:o,tracking:a});return r(d,{...s,href:i,onClick:u,target:c,children:l})};return[()=>{y=a(v={scope:void 0,eventBase:void 0}),I=P,T={rootMargin:0,threshold:0,timeout:500,onceOnly:!0},h=x(5e3),f=j(5e3),b={current:I},w=L,N=new Map([["page",[void 0]],["shelfCard",["shelf"]],["standalone",[void 0]],["mapListCard",["map"]],["mapFilter",["map"]]]),S={current:B},e({TrackedLink:V,TrackingScope:F,useInteractionTracking:J,useTrackedLinkCallback:W,useTracking:w})},[e=>r=e.jsx,e=>(a=e.createContext,n=e.useContext,o=e.useMemo,i=e.useState,l=e.useEffect,s=e.useCallback),e=>c=e.default,e=>(u=e.default,m=e.useBlockingInteractionLogger),e=>p=e.useVisibleEffect,e=>d=e.default,e=>g=e.useLinkTarget,e=>k=e.useNavigate]]},["21h32l","o4yt4q","xg719z","r73jw8","3btuy0","lr6tb6","rdeq8t","0ad67e"]]);
