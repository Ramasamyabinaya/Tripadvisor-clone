(this.$WP=this.$WP||[]).push(["7s4pzp",(e,t)=>{var a,l,r,n,o,i,s,u,c,d,h,p,f,g,b,m,_,v,y,C,I,k,N,x,T,E,R={geoId:1},L=["GEO"],O=(e=5,t="",a=!1,l,r)=>{var[u,c]=n(t),[d,h]=n(t);o(()=>{t!==d&&(h(t),c(t))},[t,d]);var[p,f]=n(!1),{results:{results:g},fetching:b}=N({query:u,source:"",scope:R,searchMode:"LocationTypeahead",maxItems:e,locationTypes:L}),m="MOBILE"===y(),_=i(()=>g.filter(e=>D?.includes(e.trackingPlaceType)||z?.includes(e.locationId)||!D),[g]),v=x(s(e=>{r?.(e)},[r]),500);o(()=>{!b&&u.trim().length>1&&g.length&&!_.length&&v(u.trim())},[b,u,g,_,v]);var[C,I]=n(null),k=a&&null==C?0:C,T=null!=C&&_[C]?.searchText||u,E=s(()=>{f(!0),I(null)},[]),O=s(()=>{f(!1),I(null)},[]);return{displayedQuery:T,results:_,fetching:b,selectedIndex:k,onOpen:E,onClose:O,isOpen:p,onChange:s(e=>{c(e),I(null),e.length>=1?E():m||O()},[E,m,O]),onKeyDown:s(e=>{switch(e.keyCode){case 38:p?I(e=>null==e?_.length-1:e>0?e-1:null):E(),e.preventDefault();break;case 40:p?I(e=>null==e?0:e<_.length-1?e+1:null):E(),e.preventDefault();break;case 13:e.preventDefault();var t=null!=k?_[k]:void 0;c(e=>t?.searchText||e),t&&(l?.({locationId:t?.locationId,locationName:t?.searchText}),O());break;case 27:O(),e.preventDefault()}},[p,k,_,O,E,l]),query:u,setQuery:c}},S={results:"MQyyE",typeahead:"bZcAm Z0 Wh",backdrop:"xQgHw",open:"ygugZ",overlay:"gKaLh o",textInput:"yMHJN _G B- z _J Cj R0",button:"fZvfu _G _H B- _S t u j Cj",back:"RkyOn",clear:"nFOvN",start:"mXKdy",hasClearButton:"LyDHm",search:"HcijR",box:"DZJGf"},q=({placeholderText:e,maxItems:t=4,initialQuery:n,highlightFirstResult:o,onSelect:i,onStart:N,onLocationNotFound:x})=>{var{query:E,setQuery:R,fetching:L,displayedQuery:O,onChange:q,onOpen:D,onClose:z,onKeyDown:P,isOpen:w,selectedIndex:A,results:B}=T(t,n,o,i,x),{localize:M}=r(),j=y(),G=u(null),H=u(null),{os:K}=c(),U="MOBILE"===j,V=U&&"IOS"===K.family,Z="MOBILE"===j&&w,W=p(e=>{e||null==z||(H.current&&H.current.blur(),z())}),Y=s(e=>q(e.currentTarget.value),[q]),J=s(()=>{q(""),H.current&&H.current.focus()},[q]),F=s(()=>{N?.()},[N]),Q=s(()=>{Z&&H.current&&H.current.blur()},[Z]);I(Z),d(()=>{var e=H.current,t=G.current;w&&null!=e&&null!=t&&e.focus()},[w]);var $=s((e,t)=>{t.preventDefault(),R(t=>e?.searchText||t),e&&(i?.({locationId:e?.locationId,locationName:e?.searchText}),z())},[i,z,R]);h("focusin",e=>{w&&W.current instanceof Element&&e.target instanceof Element&&!W.current.contains(e.target)&&z()}),h("keydown",e=>{e instanceof KeyboardEvent&&(w||e.target===H.current)&&(P(e),H.current?.focus())});var X=u(null);d(()=>{w&&null!=X.current&&X.current.focus()},[w,A]);var ee=a("div",{ref:G,className:C(S.typeahead,S.box,{[S.open]:w}),onTouchMove:Q,"data-test-attribute":"gai-typeahead",children:[l("div",{role:"presentation",className:S.backdrop,onClick:z}),a("div",{className:S.overlay,ref:W,children:[V?l("div",{role:"presentation",onClick:D,children:l("input",{ref:H,autoComplete:"off",autoCorrect:"off",autoCapitalize:"none",spellCheck:"false",required:!0,name:"q",disabled:!w,className:C(S.textInput,{[S.hasClearButton]:0!==E.length}),placeholder:e,title:M.string("common_Search"),"aria-label":M.string("common_Search"),"aria-controls":"typeahead_results","aria-autocomplete":"list",value:O,onChange:Y})}):l("input",{ref:H,autoComplete:"off",autoCorrect:"off",autoCapitalize:"none",spellCheck:"false",required:!0,name:"q",className:C(S.textInput,{[S.hasClearButton]:0!==E.length}),placeholder:e,title:M.string("common_Search"),"aria-label":M.string("common_Search"),"aria-controls":"typeahead_results","aria-autocomplete":"list",value:O,onChange:Y,onClick:U||O?D:void 0}),N?l("button",{type:"button",className:C(S.button,S.start),title:M.string("trips_gai_trip_prompts_start"),"aria-label":M.string("trips_gai_trip_prompts_start"),onClick:F,children:l(b,{})}):null,l("button",{type:"button",className:C(S.button,S.back),title:M.string("mobile_back_8e0"),"aria-label":M.string("mobile_back_8e0"),onClick:z,children:l(f,{})}),0!==E.length&&l("button",{type:"button",className:C(S.button,S.clear),title:M.string("mobile_search_filter_clear_26e8"),"aria-label":M.string("mobile_search_filter_clear_26e8"),onClick:J,children:l(_,{})}),l("div",{className:C(S.button,S.search),children:l(m,{})}),w&&a("div",{id:"typeahead_results",role:"listbox","aria-labelledby":"typeahead_results_header",className:S.results,"data-test-attribute":"typeahead-results",children:[L||B.length||!O?null:l(v,{tabIndex:-1,role:"option","aria-selected":!1,heading:"",subheading:M.string("trips_gai_location_not_supported"),icon:g,selected:!1},"no-results"),B.map((e,t)=>l(v,{tabIndex:-1,role:"option","aria-selected":t===A,heading:e.title,highlightingInfo:e.highlightingInfo,subheading:e.subtitle,label:e.label,icon:e.icon,imageVariant:e.imageVariant,href:"",selected:t===A,onClick:t=>$(e,t),ref:t===A?X:void 0},e.locationId))]})]})]});return Z?l(k,{children:ee}):ee},D=["CITY","COUNTY","ISLAND","ISLAND_GROUP","MUNICIPALITY","NATIONAL_PARK","PARISH","PREFECTURE","PROVINCE","REGION","TERRITORY"],z=[],P=({placeholderText:e,...t})=>{var{localize:a}=r();return l(E,{placeholderText:a.string("trips_v2_gai_where_step_typeahead_placeholder"),...t})};return[()=>{T=O,E=q,e({default:P,supportedLocationIds:z,supportedPlaceTypes:D})},[e=>(a=e.jsxs,l=e.jsx),e=>r=e.useLocalize,e=>(n=e.useState,o=e.useEffect,i=e.useMemo,s=e.useCallback,u=e.useRef),e=>c=e.useUserAgent,e=>d=e.useClientSideLayoutEffect,e=>h=e.useWindow,e=>p=e.useVisibleEffect,e=>f=e.default,e=>g=e.default,e=>b=e.default,e=>m=e.default,e=>_=e.default,e=>v=e.default,e=>y=e.useViewportCategory,e=>C=e.default,e=>I=e.useBlockScroll,e=>k=e.default,e=>N=e.default,e=>x=e.useDebouncedCallback]]},["21h32l","7thqz4","o4yt4q","nnprhg","mb2nze","ltllz9","3btuy0","a6i9w3","y0uq31","6qmqhw","qx89h8","qkjm8h","7gmtsf","ys6v1o","fkji80","uzmmz7","d8oes5","7l5hpv","dsbyen"]]);
