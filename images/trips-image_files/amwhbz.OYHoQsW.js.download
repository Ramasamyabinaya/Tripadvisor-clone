(this.$WP=this.$WP||[]).push(["amwhbz",(e,a)=>{var t,i,n,r,l,o,d,u,m,c,s,v,p,h,g,b,f,C,I,_,y,w,k,M,P,T,x,z,A,S,j,O,L,E,N,B,R,q,G,H,Z,D,F,V,J=e=>{var a=e.map(e=>new h(e.latitude,e.longitude));return a.length?g.fromArray(a):null},X=e=>{if(e.locationItem?.object?.locationV2?.tags?.tags?.find(e=>e?.tagId===P))return y;switch(e.placeType){case"ATTRACTION":var a=e.locationItem?.object?.locationV2?.tags?.tags?.[0]?.tagId;return a?M(a,C):C;case"EATERY":return w;case"ACCOMMODATION":if(e.locationItem?.object?.accommodationCategory==="VR")return k;return I;default:return _}},W=({title:e,cardLink:a,thumbnail:n,reviewSummary:r,isSaveEnabled:l,location:o,onSaveChange:d,onClick:u})=>{var m=r&&null!==r.rating&&null!==r.count?{rating:r.rating,reviewCount:r.count}:void 0,c=l&&o?.locationId?t(Z,{size:"small",id:o.locationId,onSaveComplete:d,onUnsaveComplete:d,dataAttributes:{"data-automation":"trip_map_item_card_save_button"}}):null,s=t(q,{title:t(E,{variant:"title-04",lineClamp:2,dataAttributes:{"data-automation":"trip_map_item_card_title"},children:e}),href:a,onClick:u,bubbleRating:m,bareTitle:!0}),v=t("div",{"data-automation":"trip_map_item_card_image",className:"_Z",children:i(N,{children:[t(L,{source:n,height:"100%"}),c&&t(O,{children:c})]})});return t("div",{className:"xwPPX Gi Pj PX Pw PJ","data-automation":"trip_map_item_card",children:t(B,{header:s,media:v,variant:"horizontal",mediaLayout:{type:"FlexMediaHorizontalMinHeight",height:85},container:"small",children:o?.placeType&&t(R,{children:t("data",{"data-automation":"trip_map_item_card_place_type",children:t(H,{item:o,variant:"minimal"})})})})})},Y=e=>{var{refetch:a}=G();return t(W,{...e,onSaveChange:a})},$={x:0,y:8},Q=({location:e,isSelected:a,isCardDisabled:n,isSaveEnabled:o,onClick:d,onMouseEnter:u,onMouseLeave:m,onCardClick:c})=>{var s=j(),v=r(()=>new h(e.latitude,e.longitude),[e]),p=a?z.markerSelected:void 0,g=l(()=>{d?.(e.itemId)},[d,e.itemId]);return i(A,{position:v,zIndexOffset:p,onMouseEnter:l(()=>{u?.(e.itemId)},[u,e.itemId]),onMouseLeave:m,onClick:g,trackingContext:void 0,alignment:"top-center",children:[t("div",{"data-automation":"trip_map_marker",children:t(a?T:x,{icon:X(e),ariaAttributes:{"aria-label":e.name||"Map pin"},saved:e.isSaved||!1})}),a&&!n&&t(S,{direction:"bottom",offset:$,isRtl:s,autoPan:!1,visible:!0,zIndexOffset:z.clickPopup,children:t(D,{title:e.name,thumbnail:e.thumbnail,cardLink:e.url||void 0,reviewSummary:e.reviewSummary,isSaveEnabled:o,location:e.locationItem?.object,onClick:()=>c?c(e.itemId):null})})]})},U=({children:e})=>{var[a,i]=o(null),n=r(()=>({selectedItemId:a,setSelectedItemId:i}),[a,i]);return t(V.Provider,{value:n,children:e})},K=()=>{var e=d(V);if(null==e)throw Error("useTripsMapContext used when not inside of a TripsMapProvider");return e},ee={container:"dtvBQ w _Z",loadingBar:"sxylT t w",loadingOverlay:"skzdP t w _Z Gv",card:"LiXhJ",cardAboveFab:"njYkA",zoomControl:"tkTJu"},ea=({latitude:e,longitude:a,geoId:n,locations:d,loading:u,hideLoadingIndicator:g=!1,cardPositioning:C="pin",isSaveEnabled:I,initialZoom:_=13,children:y,onZoomChange:w,onPinClick:k,onCardPinClick:M,withRefetch:P,isMapExpanded:T,topContent:x})=>{var z="MOBILE"===s(),A=f(T),{selectedItemId:S,setSelectedItemId:j}=K(),[O,L]=o(null),[E]=o(()=>{var t=J(d);if(t){var{southwest:i,northeast:n}=t;return new h((i.lat+n.lat)/2,(i.lng+n.lng)/2)}return new h(e,a)}),N=l(e=>{j(e),k?.(e)},[k,j]);m(()=>{if(O&&(d.length>0||A!==T)){var e=J(d);e&&O.setBounds(e)}},[O,d,T,A]);var B=r(()=>d.find(e=>e.itemId===S),[d,S]),R=l(e=>{!u&&e.userGesture&&w?.(e)},[u,w]),q=l(()=>{M&&S&&M(S)},[M,S]);m(()=>{O&&S&&B&&O.setCenter(new h(B.latitude,B.longitude))},[O,S,B]);var G=P?Y:D;return i("div",{className:ee.container,"data-automation":"trip_map_item_map",children:[i(v,{initialCenter:E,initialZoom:_,geoId:n,onLoad:e=>{if(d.length>0){var a=J(d);a&&e.map?.setBounds(a)}L(e.map)},onClick:()=>{j(null)},onZoomChange:R,children:[(u||!O)&&!g&&t("div",{className:ee.loadingBar,children:t(p,{})}),!z&&!u&&t("div",{className:ee.zoomControl,children:t(b,{variant:"Circle"})}),x?t("div",{children:x}):null,d.map(e=>t(F,{location:e,isSelected:e.itemId===S,isSaveEnabled:I,isCardDisabled:"pin"!==C,onClick:N,onCardClick:M},e.itemId)),("map-bottom"===C||"above-fab"===C)&&B&&t("div",{className:c(ee.card,{[ee.cardAboveFab]:"above-fab"===C}),children:t(G,{title:B.name,thumbnail:B.thumbnail,cardLink:B.url||void 0,reviewSummary:B.reviewSummary,location:B.locationItem?.object,isSaveEnabled:I,onClick:q})}),y]}),u&&t("div",{className:ee.loadingOverlay})]})};return[()=>{D=W,F=n(Q),V=u({selectedItemId:null,setSelectedItemId:()=>{}}),e({TripsMapProvider:U,default:ea,useTripsMapContext:K})},[e=>(t=e.jsx,i=e.jsxs),e=>(n=e.memo,r=e.useMemo,l=e.useCallback,o=e.useState,d=e.useContext,u=e.createContext,m=e.useEffect),e=>c=e.default,e=>s=e.useViewportCategory,e=>v=e.MapComponent,e=>p=e.default,e=>(h=e.LatLng,g=e.LatLngBounds),e=>b=e.default,e=>f=e.default,e=>C=e.default,e=>I=e.default,e=>_=e.default,e=>y=e.default,e=>w=e.default,e=>k=e.default,e=>M=e.getAttractionIcon,e=>P=e.NEIGHBORHOOD_TAG_ID,e=>(T=e.ActiveMapPin,x=e.StandardMapPin),e=>z=e.default,e=>(A=e.Marker,S=e.Popup),e=>j=e.useRtl,e=>O=e.CardImageOverlay,e=>L=e.default,e=>E=e.default,e=>(N=e.CardMedia,B=e.FlexCard,R=e.CardContent,q=e.CardHeader),e=>G=e.useTrip,e=>H=e.TripLocationIconContent,e=>Z=e.default]]},["21h32l","o4yt4q","fkji80","ys6v1o","5xqg72","ndszpi","jgmezl","us1vwl","dlu2yg","55nvbk","c5q3iu","bp96i9","o80y56","o3mm96","3aiijo","j2ln1o","3309mt","fm6nx5","g6hkol","49c7br","7thqz4","asj0sy","34bu7w","essqvy","6m9vgr","r6ayw2","9l2zsy","dpzonz"]]);
