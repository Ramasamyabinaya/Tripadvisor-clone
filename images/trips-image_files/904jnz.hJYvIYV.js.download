(this.$WP=this.$WP||[]).push(["904jnz",(e,t)=>{var r,a,n,o,i,s,c,u,_,l,d,E,S,v,m,T,C,I,D,g,h,P,R,M,A,O,N,L,H,p,f,U,b,G,w=["IB_CLICK","CLICKOUT","ENTER_DATES","EXP_IB_CONFIRM","BA_SOJERN_BL_CLICK","HOTEL_LIST_VIEW","ATTRACTION_LIST_VIEW","HOTEL_IB_CONFIRM","SHOPPING_CART_LIST","SELECT_B2B_HOTEL_PRODUCT","SELECT_B2B_RESTAURANT_PRODUCT","PURCHASE_B2B_HOTEL_PRODUCT","PURCHASE_B2B_RESTAURANT_PRODUCT","HS_SEM_REVIEW_HUB_SELECT_LISTING","HS_SEM_ADS_SELECT_LISTING","HS_SEM_PREMIUM_SELECT_LISTING","HS_SEM_REVIEW_HUB_SELECT_PRODUCT","HS_SEM_ADS_SELECT_PRODUCT","HS_SEM_PREMIUM_SELECT_PRODUCT","HS_SEM_REVIEW_HUB_PRODUCT_PURCHASE","HS_SEM_ADS_PRODUCT_PURCHASE","HS_SEM_PREMIUM_PRODUCT_PURCHASE","HS_SEM_SPONSORED_PLACEMENTS_CLAIM_HOTEL","HS_SEM_BUSINESS_ADVANTAGE_CLAIM_HOTEL","HS_SEM_REPUTATION_PRO_CLAIM_HOTEL","HS_SEM_SPONSORED_PLACEMENTS_PAYMENT_PAGE","HS_SEM_BUSINESS_ADVANTAGE_PAYMENT_PAGE","HS_SEM_REPUTATION_PRO_SELECT_PAYMENT_PAGE","HS_SEM_SPONSORED_PLACEMENTS_ORDER_CONFIRMATION","HS_SEM_BUSINESS_ADVANTAGE_ORDER_CONFIRMATION","HS_SEM_REPUTATION_PRO_ORDER_CONFIRMATION"],B={enabled:!0,scriptSrcPath:"/static/gtm/gtm.html",scriptSrcHostDomain:"https://www.jscache.com",scriptSrcQueryParams:"",monitoringEnabled:!0},k={MOBILE:2e3,TABLET:2e3,DESKTOP:2e3},y={},q={},V=(e,t)=>t?`${e.scriptSrcHostDomain}${e.scriptSrcPath}?gtmParams=${e.scriptSrcQueryParams}&parentDomain=${encodeURIComponent(t)}`:null,W=()=>{var e=S.get("pbjs_identitylink");return e?.envelope?.envelope},$=e=>F(e)?A:O,F=e=>!!(e.startsWith("hare")||e.match("\\.qa.tripadvisor-preview")),K=(e,t)=>e.enabled&&!q[t],x=e=>{switch(e){case"IB_CLICK":case"CLICKOUT":case"PAGEVIEW":case"BA_SOJERN_BL_CLICK":case"BA_SOJERN_BL_IMPRESSION":return!0;default:return!1}},j=e=>w.includes(e),Y=(e,t,r,a,n,o)=>{e({event:"ENTER_DATES",data:{startDate:t?.toLocaleDateString("en-US")||"",endDate:r?.toLocaleDateString("en-US")||"",numberGuests:a||0,numberRooms:n||0,isDefaultDates:o||!1}})},Q=e=>{var[t,r]=a(!1);return n(()=>{var t=setTimeout(()=>r(!0),e);return()=>clearTimeout(t)},[e]),t},z=()=>{var[e,t]=a(!1);return n(()=>{var e,r=m(r=>{null!=r?t(!0):e=requestIdleCallback(()=>t(!0))});return()=>{e&&cancelIdleCallback(e),r&&T(r)}},[]),e},J=e=>{var t=L(),r=v(),a=N(y[e]||k[r]||2e3);return t||a},X=()=>{p.current&&(p.current=new MessageChannel)},Z=()=>p.current,ee=()=>p.current?.port1,et=e=>(n(()=>{e||X()},[e]),Z()),er=()=>{var[e,t]=a("");return n(()=>{t(window.location.origin)},[]),e},ea=()=>{var e=u(),t=d(),r=C(),a=v(),{page:n,params:i,path:s}=t,c=E(),_=t?.path?.match(/(?:g|geo)(\d+)/),l=("geoId"in i?i.geoId:void 0)||(_?Number(_[1]):void 0)||void 0,S="detailId"in i?i.detailId:void 0,m="originId"in i?i.originId:void 0,T=S||l||m||void 0,D=`https://${e}${t.path}`,g=!F(e),h=!!I();return o(()=>({pageUid:c,domainName:e,page:n,locationId:T,geoId:l,devicePlatform:a,locale:r,path:s,referringUrl:document.referrer,pageTitle:document.title,fullPageUrl:D,isProd:g,isLoggedIn:h}),[c,e,a,l,r,T,n,s,D,g,h])},en=()=>{var e,[t,r]=a(""),i=e=>{var t="";e.forEach(e=>{"fulfilled"===e.status&&(t+=e.value)}),r(t)},s=(e=(e,t)=>new Promise((r,a)=>{var n=()=>{o()},o=g(e,()=>{r(`:${e.toLowerCase()}:`),t.removeEventListener("abort",n)},()=>{a(),t.removeEventListener("abort",n)});t.addEventListener("abort",n)}),o(t=>Promise.allSettled([e(D.TARGETING,t),e(D.PERFORMANCE,t),e(D.FUNCTIONAL,t)]),[]));return n(()=>{var e=!0,t=new AbortController;return s(t.signal).then(t=>{e&&i(t)}),()=>{e=!1,t.abort()}},[s]),t},eo={__key:0xd3d4987463b7,id:"d3d4987463b78a39",loc:{},definitions:[]},ei=()=>{var e=P();return o((t,r)=>{var a=r?{locationId:r,eventType:t,isGeoPage:!0}:{eventType:t,isGeoPage:!1};return e.query(eo,a).toPromise().then(({data:e})=>{var t=e?.gtmData?.audienceIds?.map(e=>e)||void 0,r=e?.gtmData?.hashedPersistentCookie||void 0,a=e?.gtmData?.hashedPersistentCookieSegmentPOC||void 0,n=e?.gtmData?.hashedPersistentCookieSegmentMeta||void 0,o=e?.gtmData?.hashedPersistentCookieSHA1||void 0,i=e?.gtmData?.hashedPersistentCookieSHA256||void 0,s=e?.gtmData?.ipAddressCountry||void 0,c=e?.gtmData?.locationData?.regionName||void 0,u=e?.gtmData?.locationData?.regionId,_=e?.gtmData?.locationData?.countryName||void 0,l=e?.gtmData?.locationData?.countryId;return{audienceIds:t,hashedPersistentCookie:r,hashedPersistentCookieSegmentPOC:a,hashedPersistentCookieSegmentMeta:n,hashedPersistentCookieSHA1:o,hashedPersistentCookieSHA256:i,ipAddressCountry:s,regionName:c,regionId:u,countryName:_,countryId:l,locationHierarchy:e?.gtmData?.locationData?.locationHierarchy||void 0,stateId:e?.gtmData?.locationData?.stateId,stateName:e?.gtmData?.locationData?.stateName||void 0,cityName:e?.gtmData?.locationData?.cityName||void 0}})},[e])},es=()=>{var e=ei(),t=en(),r=ea(),a=L(),s=i(!1),c=i([]),u=i(""),_=i([]),l=o(e=>{var t=r();return{event:e.event,data:{...t,...e.data,consent:u.current}}},[r]),d=o((e,t=!1)=>{if(j(e.event)||t)ee()?.postMessage(e);else{var r={...e,event:`${e.event}_HIGH_PRIORITY`};ee()?.postMessage(r),s.current?ee()?.postMessage(e):_.current.push(e)}},[]),E=o(t=>new Promise(r=>{var{locationId:a}=t.data;e(t.event,a).then(e=>{r({event:t.event,data:{...t.data,...e}})})}),[e]),S=o(e=>{var t=l(e);x(e.event)?E(t).then(e=>{d(t=e)}):d(t)},[l,E,d]),v=o(e=>{if(0===u.current.length){c.current.push(e);return}S(e)},[S]);return n(()=>{a&&(s.current=a,_.current.forEach(e=>d(e,!0)),_.current=[])},[a,d]),n(()=>{u.current=t,u.current.length>0&&(c.current.forEach(e=>v(e)),c.current=[])},[t,v]),v},ec=()=>{var e=es();return o(t=>{e(t)},[e])},eu=(e,t)=>{var r=E(),a=U();n(()=>{e&&a({event:"GTM_KPI_EXPERIMENT",data:{page:t}})},[t,a,e,r])},e_=e=>{var t=E(),r=R(),a=U(),o=i(r);n(()=>{e&&a({event:"PAGEVIEW",data:{liveRampEnvelope:W(),startDate:o.current.hotels?.checkInDate.toLocaleDateString("en-US"),endDate:o.current.hotels?.checkOutDate.toLocaleDateString("en-US"),numberGuests:(o.current.hotels?.adults??0)+(o.current.hotels?.children??0),numberRooms:o.current.hotels?.rooms,isDefaultDates:o.current.hotels?.defaultDates}})},[a,t,e])},el={__key:0x986742f2dd8b,id:"986742f2dd8b0ec8",loc:{},definitions:[]},ed=()=>{var e=P();return o((t,r,a)=>{var{event:n}=t,o=t.tagMetrics.map(e=>({id:e.id.toString(),name:e.name,status:e.status,executionTime:e.executionTime}));e.query(el,{request:{page:r,event:n,pixelMetrics:o,consent:a}}).toPromise()},[e])},eE=["Hotel_Review","Hotels","SmartDeals","HotelHighlight","ShowUserReviews","HotelsNear","HotelsList","LastMinute","LocalMaps","HotelsFusion"],eS=e=>{var t=R(),r=E(),{page:a}=d(),o=U(),s=i(!0);n(()=>{s.current=!0},[r]),n(()=>{if(e&&eE.includes(a)){if(s.current){s.current=!1;return}Y(o,t.hotels?.checkInDate,t.hotels?.checkOutDate,(t.hotels?.adults??0)+(t.hotels?.children??0),t.hotels?.rooms,t.hotels?.defaultDates)}},[o,e,t.hotels,a]),n(()=>{if(e&&a.includes("VacationRental")){if(s.current){s.current=!1;return}Y(o,t.vr.checkInDate||void 0,t.vr.checkOutDate||void 0,t.vr.adults+t.vr.children||void 0,void 0,void 0)}},[o,e,t.vr,a]),n(()=>{if(e&&a.includes("Attraction")){if(s.current){s.current=!1;return}Y(o,t.attractions.fromDate||void 0,t.attractions.toDate||void 0,(t.attractions.adults??0)+(t.attractions.children??0)||void 0,void 0,void 0)}},[o,e,t.attractions,a])},ev=()=>{var e=i(null),t=u(),a=ev.getGtmConfig(t),n=V(a,f()),{page:E}=d(),S=h(D.TARGETING),v=ev.useDeferGtm(E),m=s(()=>K(a,E),[a,E])&&v&&S&&!!n,T=ed(),C=o(e=>{a.monitoringEnabled&&T(e.data,E,S)},[T,E,a.monitoringEnabled,S]);eu(m,E);var I=et(m),g=o(()=>{e.current&&e.current.contentWindow&&I&&(I.port1.onmessage=C,e.current.contentWindow.postMessage("initGTMMessagePort",a.scriptSrcHostDomain,[I.port2]))},[a.scriptSrcHostDomain,C,I]);return b(m),G(m),s(()=>m?r(_,{component:l.gtm,children:r(c,{src:n,title:"gtm",ref:e,style:{display:"none"},onLoad:g})}):null,[m,n,g])},em=e=>{var t=U(),r=E(),a=i(null);n(()=>{a.current===e||M(a.current,e)||(t(e),a.current=e)},[e,t,r])};return[()=>{A={...B,scriptSrcQueryParams:encodeURIComponent("&gtm_auth=bQdYCwDudXrwbnRzFG9SEg&gtm_preview=env-3&gtm_cookies_win=x")},O={...B},N=Q,L=z,H=J,p={current:"undefined"!=typeof MessageChannel?new MessageChannel:null},f=er,U=ec,b=e_,G=eS,ev.useDeferGtm=H,ev.getGtmConfig=$,e({GoogleTagManager:ev,useGTMCallback:U,useGTMPageview:em})},[e=>r=e.jsx,e=>(a=e.useState,n=e.useEffect,o=e.useCallback,i=e.useRef,s=e.useMemo),e=>c=e.EmbeddedContent,e=>u=e.useDomainName,e=>(_=e.default,l=e.Component),e=>(d=e.useRoute,E=e.usePageviewUid),e=>S=e.default,e=>v=e.useViewportCategory,e=>(m=e.requestTTICallback,T=e.cancelTTICallback),e=>C=e.useLocale,e=>I=e.useUserId,e=>(D=e.CategoriesEnum,g=e.requestConsent,h=e.useConsent),e=>P=e.useClient,e=>R=e.useTravelInfo,e=>M=e.default]]},["21h32l","o4yt4q","dyfdn5","qlcuu5","6nmgrj","fgwvq1","9b9b10","ys6v1o","gbnboa","7thqz4","52far5","973cci","mqwhqn","etaac9","b5nukb"]]);
