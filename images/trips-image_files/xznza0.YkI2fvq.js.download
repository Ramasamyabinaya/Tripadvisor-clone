(this.$WP=this.$WP||[]).push(["xznza0",(e,t)=>{var i,a,o,n,r,l,d,c,m,s,u,p,h,v,_,b,g,I,y,C,f,N,k,w,T,S,P,D,O,A,j,x,M,R,z,E,L,U,V,B,W,H,G,Q,F,q,K,J,X=e=>{var t=[];return e.thumbnail?.photoSizes&&t.push(e.thumbnail.photoSizes),e.photos?.length&&t.push(...e.photos.filter(t=>!!t&&t.id!==e.thumbnail?.id).map(e=>e?.photoSizes).filter(Boolean)),t.slice(0,4)},Y=e=>{if(e){var t=u(e);if(t)switch(e.__typename){case"Trips_LocationItemObject":return{id:t,type:"location"};case"Trips_ReviewItemObject":return{id:t,type:"review"};case"Trips_LinkPostItemObject":return{id:t,type:"link"};case"Trips_AttractionItemObject":return{id:t,type:"attractionProduct"};case"Trips_PhotoItemObject":return{id:t,type:"photo"};case"Trips_VideoItemObject":return{id:t,type:"video"};case"Trips_NoteItemObject":return{id:t,type:"note"};case"Trips_ForumPostItemObject":return{id:t,type:"post"};case"Trips_RepostItemObject":return{id:t,type:"repost"};default:return}}},$={container:"XlrGL",imageContainer:"OKOJH o",rightSection:"qICCH",label:"TkvrX",commentSection:"mzFFg",infoSummary:"KQUph k",main:"jNvXQ",bookingInfoMobile:"aQpyM",bookingInfoDesktop:"nKYeH e k",descriptionContainer:"ktrNT"},Z={container:"f e _c",creationDataWrapper:"f Mk"},ee=({children:e,redirectUrl:t,onClick:a,dataAttributes:o})=>t?i(D,{theme:"standalone",href:t??"",target:"_blank","data-automation":o?.["data-automation"],children:e}):a?i(j,{leftAlign:!0,onClick:a,dataAttributes:o,children:e}):e,et=({title:e,body:t,author:o,date:n,titleOnClick:r,titleRedirectUrl:l})=>{var{localize:d}=O(),c=A(),s=new Date(Date.parse(n??"")),u=isNaN(s.getTime())?null:c.formatDate("date_medium_month_year",s);return a("div",{className:Z.container,children:[!!e&&i(ee,{onClick:r,redirectUrl:l,dataAttributes:{"data-automation":"trip_item_title"},children:i(m,{variant:"title-04",marginBottom:"spacing-01",children:e})}),i(M,{ctaNewline:!0,numLinesToShow:3,webkitLineClamp:!0,collapsible:!0,cta:i(j,{variant:"primary-small",dataAttributes:{"data-automation":"trip_item_description_read_more_button"},children:d.string("common_Read_more")}),ctaCollapse:i(j,{variant:"primary-small",dataAttributes:{"data-automation":"trip_item_description_read_less_button"},children:d.string("common_Readless")}),children:i(m,{variant:"supporting-01",whiteSpace:"break-spaces",dataAttributes:{"data-automation":"trip_item_description"},children:t})}),(o||u)&&a("div",{className:Z.creationDataWrapper,children:[!!o&&i(m,{variant:"supporting-03",dataAttributes:{"data-automation":"trip_item_author"},children:o}),!!o&&!!u&&i(m,{variant:"supporting-01",children:`\xa0â€¢\xa0`}),!!u&&i(m,{variant:"supporting-01",dataAttributes:{"data-automation":"trip_item_date"},children:u})]})]})},ei={container:"WXEkr Ra",vertical:"IpaTh",leftSection:"tGwEf _V",rightSection:"KJMLC e",iconButtons:"QTtiI u",icon:"BBkVc u",ctaDesktop:"ltbJg",ctaMobile:"vzZZQ",content:"cvvMk"},ea=({tripId:e,itemId:t,content:o,icon:n,ctaType:l="save",menuOptions:c,saveObject:m,hideMenu:u,comments:h,actionPermissions:v,dataAttributes:_,direction:b="horizontal",onVisible:I,onItemDeleteClick:y,onItemDeleteSuccess:C,onUndoDelete:k,deferredUnsave:w})=>{var{refetch:T}=p(),{localize:S}=O(),[P,D]=r(!1),A=s(()=>D(!0)),j=s(I),M=N(e),[L,U]=r(!1),V=m?.id&&m?.type&&e&&t?i(g,{deferredUnsave:w,tripId:e,itemId:t,saveObject:m,inViewport:P,isOwner:!!v?.canEdit,onSaveComplete:()=>{U(!1),k?.(t),T()},onClick:e=>{"unsave"===e&&(U(!0),y?.(t)),M({itemName:"HeartButtonClick",customData:{itemId:t}})},onUnsaveComplete:()=>{T(),C?.(t),M({itemName:"ConfirmRemoveItemClick",customData:{itemId:t}})}}):null,B=d(e=>{e&&M({itemName:"ClickToShowAllComments",customData:{itemId:t}})},[t,M]),W=c?i(z,{items:c,above:!0,alignEdge:"right",children:(e,t)=>i(x,{ref:e,"aria-label":S.string("mw_common_menu_fffffd37"),onClick:t,variant:"primary",size:"medium",icon:R})}):void 0,H="save"===l?V:"menu"!==l||u?void 0:W;return L?null:a("div",{className:E(ei.container,{[ei.vertical]:"vertical"===b}),..._,ref:j,children:[a("div",{className:E(ei.leftSection,{[ei.vertical]:"vertical"===b}),children:[(n||H)&&a("div",{className:ei.iconButtons,children:[n&&i("div",{className:ei.icon,children:n}),H&&"vertical"===b&&i("div",{className:ei.ctaDesktop,children:H}),H&&i("div",{className:ei.ctaMobile,children:H})]}),i("div",{className:ei.content,children:o})]}),a("div",{className:E(ei.rightSection,{[ei.vertical]:"vertical"===b}),ref:A,children:[H&&"horizontal"===b&&i("div",{className:ei.ctaDesktop,children:H}),i(f,{tripId:e,itemId:t,comments:h,variant:"CONTENT-CARD",actionPermissions:v,onExpandComments:B})]})]})},eo={itemContainer:"lcxpT f",itemImageContainer:"RmhUi o",itemTextContainer:"NM"},en=({trip:e,item:t,review:n,dataAttributes:r,onVisible:l,onItemDeleteClick:d,onUndoDelete:c})=>{var s=Y(t.object),{location:u,rating:p,title:h,text:v,userProfile:_,createdDate:b,route:g}=n||{},{localize:I}=O(),y=n?a(o,{children:[n.location&&a("div",{className:eo.itemContainer,children:[u?.thumbnail?.photoSizes&&i("div",{className:eo.itemImageContainer,"data-automation":"trip-item-review-image",children:i(P,{source:u.thumbnail?.photoSizes,aspectRatio:"1:1"})}),a("div",{className:eo.itemTextContainer,children:[u?.name&&u?.url&&i(D,{theme:"standalone",href:u.url||"",target:"_blank",children:i(m,{lineClamp:2,variant:"supporting-03",marginBottom:"spacing-02",dataAttributes:{"data-automation":"trip_item_location_name"},children:u.name})}),u?.reviewSummary?.rating&&u?.reviewSummary?.count&&i("div",{"data-automation":"trip_item_location_bubble_rating",children:i(T,{size:"small",rating:u.reviewSummary?.rating,numReviews:u.reviewSummary?.count})}),i(m,{variant:"supporting-01",marginTop:"spacing-02",dataAttributes:{"data-automation":"trip_item_location_geo_name"},children:u?.geoName})]})]}),p&&i("div",{"data-automation":"trip_item_bubble_rating",children:i(S,{rating:p,marginBottom:"spacing-01",size:"small"})}),i(et,{title:h||"",body:v||"",author:_?.username||"",date:b||"",titleRedirectUrl:g?.url||""})]}):i(et,{body:I.string("trips_saves_review_deleted")});return i(ea,{deferredUnsave:!0,tripId:e.id,icon:i(w,{color:"onLightText",size:22}),saveObject:s,content:y,itemId:t.id,comments:t.comments,actionPermissions:e.actionPermissions,dataAttributes:r,onVisible:l,onItemDeleteClick:d,onUndoDelete:c})},er=({trip:e,item:t,post:a,dataAttributes:o,onVisible:n,onItemDeleteClick:r,onUndoDelete:l})=>{var d=Y(t.object),c=i(et,{title:a.topicTitle||"",body:a.body||"",author:a.userProfile?.displayName||"",date:a.publishedDate||"",titleRedirectUrl:a.route?.url||""}),m=i(L,{});return i(ea,{deferredUnsave:!0,tripId:e.id,itemId:t.id,content:c,saveObject:d,ctaType:"save",icon:m,comments:t.comments,actionPermissions:e.actionPermissions,dataAttributes:o,onVisible:n,onItemDeleteClick:r,onUndoDelete:l})},el=(e,t,i)=>t?"Media_PhotoResult"===t.__typename?{locationName:i?.localizedName??null,reviewSummary:i?.reviewSummary??null,photoSource:t.photoSizeDynamic??null,caption:t.caption??null,id:t.photoId??null,author:t.memberProfile?.displayName??null,attribution:t.attribution?.text??null}:"Media_VideoResult"===t.__typename?{locationName:i?.localizedName??null,reviewSummary:i?.reviewSummary??null,id:t.videoId??null,videoThumbnail:t?.thumbnails?.[0]?.url??null,videoSources:t.sources??null,caption:t.caption??null,author:t.memberProfile?.displayName??null,attribution:t.attribution?.text??null}:null:null,ed=({imageSource:e,onModalClose:t})=>i(V,{widthOption:e.maxHeight>e.maxWidth?"variable":"fixed-60",onClose:t,children:i("div",{"data-automation":"trip_item_modal_photo",children:i(P,{source:e})})}),ec=({videoSources:e,onModalClose:t})=>i(V,{widthOption:"fixed-60",variant:"variable-height",onClose:t,children:i("video",{controls:!0,controlsList:"nodownload",muted:!0,autoPlay:!0,playsInline:!0,disablePictureInPicture:!0,width:"100%",height:"100%","data-automation":"trip_item_modal_video",children:e?.map(e=>i("source",{width:e.width,height:e.height,src:e.url},e.url))})}),em={aboveImageContentWrapper:"MJ",imageWrapper:"ORoTW o",belowImageContentWrapper:"f K Q1 Mk",expandIcon:"VScLx Gi"},es=({trip:e,item:t,media:n,photoVideoLocationsMap:l,dataAttributes:d,onVisible:c,onItemDeleteClick:s,onUndoDelete:u})=>{var p=Y(t.object),{localize:h}=O(),v=t.object?.__typename==="Trips_PhotoItemObject"?"PHOTO":"VIDEO",_=null;"Media_VideoResult"===n.__typename?_=l?.get(Number(n.locationId))||null:"Media_PhotoResult"===n.__typename&&(_=l?.get(Number(n.locationId))||null);var[b,g]=r(!1),I=K(v,n,_),y="PHOTO"===v,C="VIDEO"===v;return!I||y&&(!I.photoSource||null===I.photoSource.urlTemplate||null===I.photoSource.maxHeight||null===I.photoSource.maxWidth)||C&&(null===I.videoPageUrl||null===I.videoThumbnail)?null:a(o,{children:[i(ea,{deferredUnsave:!0,tripId:e.id,saveObject:p,itemId:t.id,comments:t.comments,actionPermissions:e.actionPermissions,dataAttributes:d,onItemDeleteClick:s,onUndoDelete:u,content:a("div",{children:[!!I.locationName&&a("div",{className:em.aboveImageContentWrapper,children:[i(m,{variant:"title-04",dataAttributes:{"data-automation":"trip_item_location_name"},children:I.locationName??""}),!!I.reviewSummary?.count&&!!I.reviewSummary?.rating&&i("div",{"data-automation":"trip_item_bubble_rating",children:i(T,{size:"small",numReviews:I.reviewSummary.count,rating:I.reviewSummary.rating})})]}),a("div",{className:em.imageWrapper,children:[y&&a(o,{children:[i("div",{className:em.expandIcon,children:i(j,{onClick:()=>g(!0),dataAttributes:{"data-automation":"trip_item_expand_photo"},children:i(U,{size:24,color:"primaryIcon"})})}),i("div",{"data-automation":"trip_item_photo_image",children:i(P,{height:135,source:I.photoSource})})]}),C&&a(o,{children:[i("div",{className:em.expandIcon,children:i(j,{onClick:()=>g(!0),dataAttributes:{"data-automation":"trip_item_expand_video"},children:i(U,{size:24,color:"primaryIcon"})})}),i("div",{"data-automation":"trip_item_video_thumbnail",children:i(P,{height:135,source:I.videoThumbnail})})]})]}),(!!I?.author||!!I?.caption||!!I?.attribution)&&a("div",{className:em.belowImageContentWrapper,children:[!!I.author&&i(m,{variant:"supporting-03",dataAttributes:{"data-automation":"trip_item_posted_by"},children:h.string("trips_photo_video_item_author",{sAuthor:I.author})}),!I.author&&!!I?.attribution&&i(m,{variant:"supporting-03",dataAttributes:{"data-automation":"trip_item_attribution"},children:I?.attribution}),""!==I.caption&&i(m,{variant:"supporting-01",dataAttributes:{"data-automation":"trip_item_caption"},children:I.caption??""})]})]}),onVisible:c}),C&&b&&i(ec,{videoSources:I.videoSources,onModalClose:()=>g(!1)}),y&&b&&i(ed,{imageSource:I.photoSource,onModalClose:()=>g(!1)})]})},eu=(e,t)=>e?t?{title:e.preview?.title??null,body:e.preview?.canonicalUrl??null,author:e.userProfile?.displayName??null,date:e.updated??null}:{title:e.title??null,body:e.body??null,author:e.author?.displayName??null,date:e.updated??null,authorId:e.author?.userId??null}:null,ep={__key:53015879390920,id:"3037b8a896c818b4",loc:{},definitions:[]},eh={__key:33999642884397,id:"1eec28a2f92d2562",loc:{},definitions:[]},ev=e=>e.object?.__typename==="Trips_LinkPostItemObject"?e.object.linkPostId:e.object?.__typename==="Trips_NoteItemObject"?e.object.noteId:null,e_=({trip:e,item:t,note:n,dataAttributes:l,onVisible:d,onItemDeleteClick:m,onUndoDelete:s,deleteFlow:u="singleNote"})=>{var[p,v]=r(!1),_=c(!0),b=t.object?.__typename==="Trips_LinkPostItemObject",{localize:g}=O(),I=ev(t),[y,C]=r(!1),f=J(n,b??!1),[{fetching:N},w]=h(ep),[{fetching:T},S]=h(eh),P=k(e.id),{launchErrorToast:D,launchItemRemovedToast:A}=W(),j=F(),x=e.actionPermissions?.canEdit&&f?.authorId===j,M=t.id??0;if(!f||!f.body||p)return null;var R=()=>{N||T||("full"===u?S({tripId:e.id,reference:{id:`${t.reference?.id||M}`,type:t.reference?.type??"note"}}):w({itemId:M,tripId:e.id})).then(e=>{if(e.error)throw e.error;P({itemName:"RemoveNote"})}).catch(()=>{D()})},z=[{onClick:()=>{v(!0),_.current=!0,m?.(M),A(e.title??void 0,()=>(_.current=!1,v(!1),s?.(M),Promise.resolve({})),()=>{_.current&&R()})},content:g.string("trips_delete_note"),key:"delete-note",icon:Q,iconColor:"dangerIcon",textColor:"dangerText",dataAttributes:{"data-automation":"trip_item_delete_note"}}];return b||z.unshift({onClick:()=>C(!0),content:g.string("trips_edit_note"),key:"edit-note",icon:G,dataAttributes:{"data-automation":"trip_item_edit_note"}}),a(o,{children:[!b&&y&&i(H,{variant:"EDIT",noteId:I??0,noteTitle:f.title??"",noteBody:f.body??"",onClose:()=>C(!1)}),i(ea,{tripId:e.id,itemId:t.id,comments:t.comments,ctaType:"menu",direction:"vertical",menuOptions:z,icon:i(B,{}),actionPermissions:e.actionPermissions,dataAttributes:l,onItemDeleteClick:m,onUndoDelete:s,content:i(et,{titleOnClick:!b&&x?()=>C(!0):null,titleRedirectUrl:b?f.body:null,title:f.title??null,body:f.body,author:f.author??null,date:f.date??null}),hideMenu:b?!e.actionPermissions?.canEdit:!x,onVisible:d})]})};return[()=>{q=n(({trip:e,item:t,location:o,dataAttributes:n,restaurantsHourOptionsMap:c,onCommerceClick:u,onVisible:h,onItemDeleteClick:k,onUndoDelete:w},T)=>{var{refetch:S,hotelsNarrativeDescriptionMap:P}=p(),[D,O]=r(!1),[A,j]=r(!1),x=s(()=>{h?.(),O(!0)}),M=N(e.id),R=Y(t.object),z=t.comments||[],E="GENERATIVE_AI"===t.creationMethod,L=l(()=>"ACCOMMODATION"===o.placeType&&"HOTEL"===o.accommodationCategory&&E&&o?.locationId?P.get(o.locationId):E?t.narrativeDescription?.plainText:"",[P,E,t.narrativeDescription?.plainText,o.accommodationCategory,o.locationId,o.placeType]),U=l(()=>X(o),[o]),V=v(o),{awardType:B,year:W}=o.locationV2?.bestAwardForActiveYearV2||{},H=d(e=>{e&&M({itemName:"ClickToShowAllComments",customData:{itemId:t?.id}})},[t?.id,M]),G=i(_,{tripItem:o,trip:e,isAIGenerated:E,recommendedProduct:t.recommendedProduct,pauseQuery:!D,onCommerceClick:u});return A?null:a("div",{ref:T,className:$.container,...n,children:[i("div",{children:i("div",{className:$.imageContainer,"data-automation":"trip_item_carousel_image",children:i(b,{itemLink:o.route?.url||"",photos:U,action:R?.id&&R?.type&&e?.id&&t?.id?i(g,{deferredUnsave:!0,tripId:e.id,itemId:t.id,saveObject:R,inViewport:D,isOwner:!!e.actionPermissions?.canEdit,onSaveComplete:()=>{j(!1),t.id&&w?.(t.id),S()},onClick:e=>{"unsave"===e&&(j(!0),t.id&&k?.(t.id)),M({itemName:"HeartButtonClick",customData:{itemId:t.id,action:e}})},onUnsaveComplete:()=>{S(),M({itemName:"ConfirmRemoveItemClick",customData:{itemId:t.id}})}}):null,travelersChoiceAwardData:B&&W?{awardType:B,awardYear:W}:void 0})})}),a("div",{className:$.rightSection,ref:x,children:[a("div",{className:$.infoSummary,children:[a("div",{className:$.main,children:[i(I,{title:o.name,content:i(y,{item:o,variant:"extended",pauseQuery:!D,restaurantsHourOptionsMap:c,tripDateType:e.date?.type}),labels:o.isGeo?null:o.geoName&&i("span",{"data-automation":"trip_item_label",children:i("div",{className:$.label,children:i(m,{variant:"label-01",color:"inherit",elementType:"span",children:o.geoName})})}),itemLink:o.route?.url||"",reviewData:V}),(o.locationDescription||L)&&i("div",{className:$.descriptionContainer,children:i(C,{descriptionText:L||o.locationDescription||"",isAIGenerated:!!L})}),i("div",{className:$.bookingInfoMobile,"data-automation":"trip_item_commerce_info_mobile",children:G})]}),i("div",{className:$.bookingInfoDesktop,"data-automation":"trip_item_commerce_info_desktop",children:G})]}),i("div",{className:$.commentSection,children:i(f,{tripId:e.id,itemId:t.id,comments:z,variant:"IMAGE-CARD",actionPermissions:e.actionPermissions,onExpandComments:H})})]})]})}),K=el,J=eu,e({ForumPostCard:er,LocationCard:q,NoteCard:e_,PhotoVideoCard:es,ReviewCard:en,getLocationPhotos:X,getSATDModalSaveObject:Y})},[e=>(i=e.jsx,a=e.jsxs,o=e.Fragment),e=>(n=e.forwardRef,r=e.useState,l=e.useMemo,d=e.useCallback,c=e.useRef),e=>m=e.default,e=>s=e.useOnVisible,e=>(u=e.getItemReferenceId,p=e.useTrip,h=e.useTripMutation),e=>(v=e.getLocationReviewData,_=e.TripLocationCommerceElement,b=e.CardMediaElement,g=e.CardSaveButton,I=e.CardHeaderElement,y=e.TripLocationIconContent,C=e.CardDescriptionElement,f=e.CardCommentElement),e=>(N=e.useSavesInteractionLogger,k=e.useManagementImpressionLogger),e=>w=e.default,e=>(T=e.BubbleRatingWithReviewCount,S=e.BubbleRating),e=>P=e.default,e=>D=e.default,e=>(O=e.useLocalize,A=e.useIntlFormatter),e=>(j=e.BorderlessButton,x=e.CircularButton),e=>M=e.ReadMore,e=>R=e.default,e=>z=e.PopoverMenu,e=>E=e.default,e=>L=e.default,e=>U=e.default,e=>V=e.Modal,e=>B=e.default,e=>W=e.default,e=>H=e.AddOrEditNoteModal,e=>G=e.default,e=>Q=e.default,e=>F=e.useUserId]]},["21h32l","o4yt4q","essqvy","3btuy0","r6ayw2","9l2zsy","sa2a6q","nute5e","bkeq24","34bu7w","lr6tb6","7thqz4","jppfwt","wgun1f","mvpl5y","s2gl90","fkji80","7bjcrr","74j83y","i3sz5h","d5rizv","x0lcjw","5h0me9","55gplo","d3i8k1","52far5"]]);
