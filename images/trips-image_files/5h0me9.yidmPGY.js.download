(this.$WP=this.$WP||[]).push(["5h0me9",(t,e)=>{var i,a,r,n,o,d,l,s,_,c,u,p,m,g,h,f,v,T,b,N,y,x={noteTitle:"stPco",noteContent:"ksZLO",button:"xTanC f F",alertContainer:"Pj PN Pw PA"},I={__key:0x6dcf8cd80bee,id:"6dcf8cd80bee847e",loc:{},definitions:[]},w={__key:0xd0f90722f41,id:"0d0f90722f418bf2",loc:{},definitions:[]};function E({variant:t,noteTitle:e,noteBody:E,noteId:C,tripId:A,onClose:L}){var[k,P]=n(e??""),[D,M]=n(E??""),[O,S]=n(""),[j,q]=n(""),[z,R]=n(null),F=o(null),V=v(A),W=T(A),{localize:$}=g(),{getTripErrorMessage:B}=h(),[{fetching:Y},Z]=f(I),[{fetching:G},H]=f(w),J=b(A),K=N(A),Q="EDIT"===t,U=Q?$.string("trips_edit_note"):$.string("trips_trip_saves_create_note"),X=Q?$.string("trips_general_apply"):$.string("trips_add_to_trip"),tt=i(a,{children:[r(m,{display:"inline-block",variant:"supporting-03",children:$.string("trips_trip_note_title")})," ",r(m,{display:"inline-block",variant:"supporting-01",children:$.string("trips_optional")})]});d(()=>{Q||K({itemName:"AddNoteModal"})},[Q,K]),d(()=>{null!==z&&F.current?.scrollIntoView({behavior:"smooth",block:"end"})},[z]),d(()=>{V({itemName:"AddNoteModal"})},[V]);var te=l(async()=>{if(Q?(t=await H({noteId:C??0,title:k,body:D}),e=t?.data?.updateTripNote?.errors):(J({itemName:"SubmitNoteClick",customData:{note:D}}),t=await Z({tripId:A??0,title:k,body:D}),e=t?.data?.addNoteToTrip?.errors),e?.length){var t,e,i=e.find(t=>t?.field==="NOTE_TITLE");i&&S(B("EDIT_TRIP",i));var a=e.find(t=>t?.field==="NOTE_BODY");a&&q(B("EDIT_TRIP",a))}if(O||j)throw new y("Validation error");if(t.error)throw Error(t.error.message)},[H,Z,Q,A,C,k,D,O,j,B,J]),ti=l(async()=>{if(D&&0!==D.trim().length)try{await te(),L(),W({itemName:"SuccessfulNoteAdd",customData:{note:D}})}catch(t){if(t instanceof y)return;R(B("ADD_NOTE"))}else q($.string("trips_error_empty_note"))},[L,B,te,D,W,$]);return r(c,{onClose:L,variant:"fixed-height-sticky-footer",widthOption:"fixed-60",title:U,buttonsAlignment:"right",children:i("div",{"data-automation":"trip_add_or_edit_note_modal",children:[r("div",{className:x.noteTitle,children:r(u,{id:"new_trip_note_title",name:"title",label:tt,value:k,errorText:O,maxLength:100,placeholder:$.string("trips_note_title_example"),onChange:t=>{R(null),S(""),P(t.target.value)},"data-automation":"trip_add_or_edit_note_modal_title_input","data-testid":"trip_add_or_edit_note_modal_title_input"})}),r("div",{className:x.noteContent,children:r(p,{variant:"five-line",id:"trip_description",name:"description",label:$.string("trips_your_note"),value:D,errorText:j,state:j?"error":void 0,maxLength:1e3,characterCountType:"max",placeholder:$.string("trips_note_body_example"),onChange:t=>{R(null),(t.target.value||0!==t.target.value.trim().length)&&j&&q(""),M(t.target.value)},"data-automation":"trip_add_or_edit_note_modal_body_input","data-testid":"trip_add_or_edit_note_modal_body_input"})}),r("div",{className:x.button,children:r(_,{"aria-label":$.string("common_Loading"),loading:Y||G,onClick:ti,dataAttributes:{"data-automation":"trip_add_or_edit_note_modal_save_button"},children:X})}),z?r("div",{className:x.alertContainer,ref:F,"data-automation":"trip_add_or_edit_note_modal_error_alert",children:r(s,{variant:"warning","aria-live":"assertive",children:z})}):null]})})}return t("AddOrEditNoteModal",E),[()=>{y=class extends Error{},t("AddOrEditNoteModal",E)},[t=>(i=t.jsxs,a=t.Fragment,r=t.jsx),t=>(n=t.useState,o=t.useRef,d=t.useEffect,l=t.useCallback),t=>s=t.InlineAlert,t=>_=t.default,t=>c=t.Modal,t=>(u=t.TextInput,p=t.TextArea),t=>m=t.default,t=>g=t.useLocalize,t=>h=t.useLocalizeTripError,t=>f=t.useTripMutation,t=>(v=t.useManagementImpressionLogger,T=t.useManagementInteractionLogger,b=t.useSavesInteractionLogger,N=t.useSavesImpressionLogger)]]},["21h32l","o4yt4q","lt9m20","jppfwt","i3sz5h","u3aiot","essqvy","7thqz4","mc5s4b","r6ayw2","sa2a6q"]]);
