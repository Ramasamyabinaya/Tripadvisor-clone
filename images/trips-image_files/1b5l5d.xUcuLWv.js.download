(this.$WP=this.$WP||[]).push(["1b5l5d",(e,t)=>{var a,r,l,n,i,s,o,u,c,p,d,T,h,y,g,b,R,m,v,A,S,f,N,_,k,O,I,C,w,E,M,L,P,H,U,x={__key:0xdbd615f56871,id:"dbd615f56871f5eb",loc:{},definitions:[]},D={__key:0x6f0b217715d6,id:"6f0b217715d6636f",loc:{},definitions:[]},q=(e,t,r,l=!1)=>{var{locationV2:n,defaultUrl:i,hotelsUrl:s,attractionOverviewURL:o,restaurantOverviewURL:u,thumbnail:c}=e??{},{locationId:p,placeType:d,isGeo:T,names:h,vacationRentalsRoute:y}=n??{},{maxWidth:g,maxHeight:b,urlTemplate:R}=c?.photoSizeDynamic??{};if(null==p||p<=1||null!=t&&!0!==T)return null;var m=s??o??u??y?.url??i;return null==m?null:{key:String(p),title:h?.name??"",subtitle:h?.longOnlyHierarchyTypeaheadV2,label:l?a(v,{id:"social_mobile_reason_for_sponsored"}):void 0,searchText:h?.name??"",url:m,trackingType:l?"SPONSORED_LOCATION":"LOCATION",trackingPlaceType:d,locationId:p??-1,image:r?{maxWidth:g,maxHeight:b,urlTemplate:R}:null}},j={__key:0x83d9ecf20bc2,id:"83d9ecf20bc289b9",loc:{},definitions:[]},z=(e,t)=>{var{localize:a}=A(),i=d(),s=R(),o=r(!0);return l(()=>()=>{o.current=!1},[]),n(()=>{navigator.geolocation.getCurrentPosition(({coords:{latitude:a,longitude:r}})=>{S.set("rejectedLocationPermissions",!1);var l=(()=>{switch(e){case"ATTRACTIONS":return{page:"NearbyAttractions",params:{latitude:a,longitude:r}};case"HOTELS":return{page:"NearbyHotels",params:{latitude:a,longitude:r}};case"RESTAURANTS":return{page:"NearbyRestaurants",params:{latitude:a,longitude:r}};case"VACATION_RENTALS":return{page:"NearbyVacationRentals",params:{latitude:a,longitude:r}};default:return{page:"Nearby",params:{isNearby:!0,latitude:a,longitude:r}}}})();s.query(j,l).toPromise().then(({data:e})=>{t();var a=e?.routes?.[0]?.url;null!=a&&i(a)},()=>{t()})},e=>{o.current&&t(),(e.code===e.PERMISSION_DENIED||e.code===e.TIMEOUT||e.code===e.POSITION_UNAVAILABLE)&&(S.set("rejectedLocationPermissions",!0),alert(a.string("mw_js_positionPermissionDenied")))},{timeout:6e3})},[a,i,s,e,t])},V=({scope:e,onStopLoading:t})=>{var{localize:a}=A(),r="number"==typeof e.latitude&&"number"==typeof e.longitude,l=z(e.linkType,t);return r?null:{title:a.string("mx_nearby"),searchText:a.string("mx_nearby"),icon:f,trackingType:"NEARBY",key:"NEARBY",onClick:l}},B=(e,t,a)=>{var{title:r,authors:l,photo:n}=e;return{title:r,subtitle:l,searchText:r,icon:N,trackingType:t?"SPONSORED_ARTICLE":"ARTICLE",image:a?n:null}},K=(e,t,a)=>{var{name:r,stateAndCountryOrEquivalent:l,photo:n}=e;return{title:r,subtitle:l,searchText:r,trackingType:t?"SPONSORED_LOCATION":"LOCATION",image:a?n:null}},F=(e,t,a)=>{var{title:r,ownerDisplayName:l,photo:n}=e;return{title:r,subtitle:l,searchText:r,icon:_,trackingType:t?"SPONSORED_TRIP":"TRIP",image:a?n:null}},Q=(e,t)=>{var r,l=k(),n=I(),{page:i}=h(),s=y(),{randomSponsorshipCampaign:o}=O(e),u=C(()=>{o&&n({team:"TAPS",page:i,pageUid:s,itemType:"sponsoredSearchImpression",itemId:String(o.campaignId),itemName:o.sponsorDisplayName,customData:JSON.stringify({campaignType:o.campaignType,clickUrl:o.clickUrl,sponsorId:o.sponsorId})})});if(!o)return null;var{campaignId:c,sponsorId:p,sponsorDisplayName:d,clickUrl:T,campaignType:g}=o,b=124!==o.sponsorId,R={key:String(c),label:b?a(v,{id:"sponsored_search_sponsored_label"}):void 0,url:T,onClick:()=>{l({team:"TAPS",actionType:"click",page:i,pageUid:s,itemType:"sponsoredSearchClick",itemId:String(c),itemName:d,customData:JSON.stringify({campaignType:g,clickUrl:T,sponsorId:p})})}};switch(g){case"ARTICLE":r=B(o,b,t);break;case"GEO":r=K(o,b,t);break;case"TRIP":r=F(o,b,t);break;default:return null}return{...R,...r,title:a("div",{ref:u,children:r.title})}},W=({isOpen:e,scope:t,onStopLoading:r,isTypeaheadUIRefreshExperiment:l})=>{var n=y(),s={isHotelsUrl:"HOTELS"===t.linkType,isAttractionsUrl:"ATTRACTIONS"===t.linkType,isRestaurantsUrl:"RESTAURANTS"===t.linkType,isRentalsUrl:"VACATION_RENTALS"===t.linkType},[{data:o}]=m({query:x,variables:s,pause:!e}),[{data:u}]=m({query:D,variables:{recentLocationsLimit:"ATTRACTION"===t.pageType||"HOTEL"===t.pageType||"RESTAURANT"===t.pageType?10:5,uid:n,...s},pause:!e}),c=M({scope:t,onStopLoading:r}),p=L(!e,l),d=i(()=>(o?.popularDestinations?.map(e=>E(e,t.linkType,l))||[]).filter(Boolean).slice(0,5),[o,t.linkType,l]),T=i(()=>(u?.insightProfile?.locations?.map(e=>E(e?.location,t.linkType,l))||[]).filter(Boolean).slice(0,5),[u,t.linkType,l]);return i(()=>{var e,t,r=[];return null!=c&&r.push(c),null!=p&&r.push(p),T.length>0?(e=a(v,{id:"dual_search_recently_viewed_all_caps"}),t=r.length,r.push(...T)):d.length>0&&(e=a(v,{id:"dual_search_popular_destinations"}),t=r.length,r.push(...d)),{results:r,header:e,headerIndex:t}},[c,p,d,T])},Y=({source:e,scope:t,maxItems:a,onClose:i,isOpen:o,onOpen:u,query:c,setQuery:p,isTypeaheadUIRefreshExperiment:y,searchMode:R="SingleSearch",highlightFirstResult:m=!1,shouldNavigateForResult:v=()=>!0,onResultSelected:A,loadingTimeLimit:S,showRecentResults:f=!1,scopeSRPToLinkType:N=!1,runQueryOnConfigChange:_=!1,onKeyEnterWithoutSelection:k})=>{var O=h(),I=d(),[C,w]=s(0),[E,M]=s(!1),{results:{results:L,resultsId:H},logTypeaheadOpened:U,logResultSelection:x,logSearchAction:D,searchSessionId:q}=g({query:c,source:e,scope:t,searchMode:R,maxItems:a,showRecentResults:f,scopeSRPToLinkType:N,runQueryOnConfigChange:_,isTypeaheadUIRefreshExperiment:y,showArticles:!0}),j=n(()=>{M(!1)},[]),z=P({scope:t,isOpen:o,onStopLoading:j,isTypeaheadUIRefreshExperiment:y}),V=0===L.length||!c.length||c.length<b,B=V?z.results:L,K=r("");l(()=>{H!==K.current&&(w(Date.now()),K.current=H)},[H]);var[F,Q]=s(null),W=m&&null==F?0:F,Y=null!=F&&B[F]?.searchText||c,$=n((e,t)=>{x(t,V,e,B.findIndex(t=>t.key===e.key),C)},[B,x,C,V]),G=n(e=>{if(null!=e){if(0!==e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;if(O.path===e.currentTarget.pathname&&T.get(O.page)?.isClientNavigable({sourcePage:O.page})){null!=i&&i();return}}M(!0)},[O,i]),J=n(e=>{(!o||e)&&(u&&u(),Q(null),U(),w(Date.now()))},[u,o,U]),X=n(()=>{o&&(Q(null),i&&i())},[o,i]),Z=n(e=>{p(e),Q(null),e.length>=b&&J()},[p,J]),ee=n(e=>{switch(e.keyCode){case 38:o?Q(e=>null==e?B.length-1:e>0?e-1:null):J(),e.preventDefault();break;case 40:o?Q(e=>null==e?0:e<B.length-1?e+1:null):J(),e.preventDefault();break;case 13:var t=null!=W?B[W]:null;null==t&&k?(e.preventDefault(),X(),k(c)):null!=t&&($(t,"enter"),!1===e.defaultPrevented&&(t.onClick?.(),A?.(t),Q(null),v?.(t)&&null!=t.url&&I(t.url)&&M(!0),e.preventDefault()));break;case 27:X(),e.preventDefault()}},[I,o,W,B,X,J,$,v,A,k,c]),et=n(()=>{D(C),M(!0)},[D,C]),ea=n(()=>{Q(null)},[]);l(()=>{var e=null;return E&&S&&(e=setTimeout(j,S)),()=>{e&&clearTimeout(e)}},[E,j,S]);var er=n((e,t,a)=>{var r=null==a||a.doTracking,l=null==a||a.startLoading;r&&$(e,"click"),l&&G(t),A?.(e)},[$,G,A]);return{displayedQuery:Y,isLoading:E,results:B,header:V?z.header:void 0,headerIndex:V?z.headerIndex:void 0,selectedIndex:W,searchSessionId:q,onResultHovered:ea,onResultClicked:er,onOpen:J,onClose:X,onSubmit:et,onChange:Z,onKeyDown:ee}},$="typeahead_ui_refresh_1697225418",G=()=>{var{experimentBuckets:e}=w({experimentKeys:[$]}),t=e?.[$],a="None";return"Control"===t?a="Control":"Test"===t&&(a="Test"),{bucketVariant:a,isTypeaheadUIRefreshExperiment:"Test"===a}},J={HOTEL:["Hotels","MobileHotels","Hotel_Review","MobileHotel_Review","HotelHighlight","MobileHotelHighlight","SmartDeals","MobileSmartDeals","HotelsList","MobileHotelsList","HotelsNear","MobileHotelsNear","NearbyHotels","MobileNearbyHotels","HotelSearch","LastMinute","TravelersChoiceHotels","ShowUserReviewsHotels"],ATTRACTION:["Attractions","MobileAttractions","Attractions_Coverpage","Attraction_Review","MobileAttraction_Review","AttractionsNear","AttractionProductReview","MobileAttractionProductReview","MobileAttractionsNear","Attraction_Products","MobileAttraction_Products","AttractionReviewSearch","MobileAttractionReviewSearch","NearbyAttractions","MobileNearbyAttractions","ShowUserReviewsAttractions","TravelersChoiceAttractions"],RESTAURANT:["Restaurants","MobileRestaurants","Restaurant_Review","MobileRestaurant_Review","RestaurantSearch","MobileRestaurantSearch","RestaurantsNear","MobileRestaurantsNear","RestaurantMenu","MobileRestaurantMenu","NearbyRestaurants","MobileNearbyRestaurants","TravelersChoiceRestaurants","ShowUserReviewsRestaurants"],FORUM:["ShowTopic","ShowForum","ListForums","ForumHome"]},X={},Z=({source:e,maxItems:t=10,placeholderText:i,initialQuery:o="",hidden:d,onClose:T,onOpen:h,onResultSelected:y,scope:g,searchMode:b="SingleSearch",isModalOnly:R=!1,size:m="small",showBorder:v=!0,boxShadow:A="none",inputTypography:S="input-01",absoluteOverlayStyles:f,highlightFirstResult:N,showRecentResults:_=!1,updateTypeAheadResults:k,isLoadingOverride:O,closeOnSelection:I,onKeyEnterWithoutSelection:C})=>{var[w,E]=s(R),M=n(()=>{R||E(!1),T&&T()},[T,R]),L=n(()=>{R||E(!0),h&&h()},[R,h]),P=n(e=>{y?.(e),I&&M()},[y,I,M]),{isTypeaheadUIRefreshExperiment:x}=U(),[D,q]=s(o),j=H({source:e,maxItems:t,scope:g,searchMode:b,onOpen:L,onClose:M,isOpen:w,query:D,setQuery:q,highlightFirstResult:N,showRecentResults:_,onResultSelected:P,onKeyEnterWithoutSelection:C}),z=j.results&&k?j.results.map(k):j.results,{onOpen:V}=j,B=r(!1);return(l(()=>{R&&null!=V&&!B.current&&V(!0),B.current=w},[R,V,w]),d&&!w)?null:a(u,{component:c.typeahead,children:a(p,{...j,results:z,onResultClicked:(e,t)=>{j.onResultClicked?.(e,t)},placeholderText:i,query:D,scope:g,isOpen:w,testAttribute:`typeahead-${e}`,size:m,showBorder:v,boxShadow:A,typographyVariant:S,absoluteOverlayStyles:f,isLoading:null!=O?O:j.isLoading,isTypeaheadUIRefreshExperiment:x})})};return[()=>{E=q,M=V,L=Q,P=W,H=Y,U=G,Object.entries(J).forEach(([e,t])=>t.forEach(t=>{X[t]=e})),e({default:o(Z),pageToTypeMappings:X,useTypeaheadState:H,useTypeaheadUIRefreshTest:U})},[e=>a=e.jsx,e=>(r=e.useRef,l=e.useEffect,n=e.useCallback,i=e.useMemo,s=e.useState,o=e.memo),e=>(u=e.default,c=e.Component),e=>p=e.TypeaheadUI,e=>d=e.useNavigate,e=>T=e.pages,e=>(h=e.useRoute,y=e.usePageviewUid),e=>(g=e.default,b=e.MIN_QUERY_LENGTH),e=>(R=e.useClient,m=e.useQuery),e=>(v=e.default,A=e.useLocalize),e=>S=e.default,e=>f=e.default,e=>N=e.default,e=>_=e.default,e=>k=e.default,e=>O=e.useRandomSponsorshipCampaign,e=>I=e.default,e=>C=e.useOnVisible,e=>w=e.useAbTestWithQueryStatus]]},["21h32l","o4yt4q","6nmgrj","hwdnu5","0ad67e","u5g3tb","fgwvq1","7l5hpv","mqwhqn","7thqz4","tp1g68","nc3gmf","zb2uaz","l75rcq","r73jw8","ubyuk3","xg719z","3btuy0","gugp1d"]]);
